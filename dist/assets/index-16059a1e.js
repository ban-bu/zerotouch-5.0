import{r as h,a as Te,R as De}from"./vendor-b1791c80.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Me={exports:{}},ce={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le=h,Ae=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),Fe=Object.prototype.hasOwnProperty,Ue=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0};function Ce(r,t,n){var o,s={},l=null,c=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(c=t.ref);for(o in t)Fe.call(t,o)&&!ze.hasOwnProperty(o)&&(s[o]=t[o]);if(r&&r.defaultProps)for(o in t=r.defaultProps,t)s[o]===void 0&&(s[o]=t[o]);return{$$typeof:Ae,type:r,key:l,ref:c,props:s,_owner:Ue.current}}ce.Fragment=Pe;ce.jsx=Ce;ce.jsxs=Ce;Me.exports=ce;var e=Me.exports,xe={},ke=Te;xe.createRoot=ke.createRoot,xe.hydrateRoot=ke.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),E=(r,t)=>{const n=h.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:m="",children:p,...x},i)=>h.createElement("svg",{ref:i,...qe,width:s,height:s,stroke:o,strokeWidth:c?Number(l)*24/Number(s):l,className:["lucide",`lucide-${Ge(r)}`,m].join(" "),...x},[...t.map(([d,w])=>h.createElement(d,w)),...Array.isArray(p)?p:[p]]));return n.displayName=`${r}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=E("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=E("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=E("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=E("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=E("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=E("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=E("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=E("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=E("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=E("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=E("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=E("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=E("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=E("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=E("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=E("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=E("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=E("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=E("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=E("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=E("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=E("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=E("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=E("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=E("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),R=({children:r,type:t="fade",duration:n=300,show:o=!0,onExited:s=()=>{}})=>{const[l,c]=h.useState(o),[m,p]=h.useState(!1),x=(d,w,N)=>{const j="transition-all duration-300 ease-in-out";if(!w)return"opacity-0 scale-95";switch(d){case"fade":return`${j} opacity-100`;case"slide-up":return`${j} opacity-100 translate-y-0`;case"slide-down":return`${j} opacity-100 translate-y-0`;case"slide-left":return`${j} opacity-100 translate-x-0`;case"slide-right":return`${j} opacity-100 translate-x-0`;case"scale":return`${j} opacity-100 scale-100`;default:return`${j} opacity-100`}};if(h.useEffect(()=>{let d;return o&&!l?(c(!0),p(!0),d=setTimeout(()=>{p(!1)},50)):!o&&l&&(p(!0),d=setTimeout(()=>{c(!1),p(!1),s()},n)),()=>{clearTimeout(d)}},[o,l,n,s]),!l&&!o)return null;const i=x(t,o);return e.jsx("div",{className:i,children:r})},rt=({message:r="æ­£åœ¨å‘é€æ¶ˆæ¯..."})=>e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 text-sm",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{children:r})]}),at=({message:r="AIæ­£åœ¨æ€è€ƒ"})=>e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx("span",{className:"text-sm",children:r}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]})]}),nt=({scenario:r,messages:t,onSendMessage:n,isProcessing:o})=>{const[s,l]=h.useState(""),[c,m]=h.useState(null),p=h.useRef(null),x=h.useRef(null),i=()=>{var j;(j=p.current)==null||j.scrollIntoView({behavior:"smooth"})};h.useEffect(()=>{i()},[t]);const d=j=>{j.preventDefault(),!(!s.trim()&&!c)&&(n({text:s.trim(),image:c,timestamp:new Date().toISOString()}),l(""),m(null),x.current&&(x.current.value=""))},w=j=>{const S=j.target.files[0];S&&S.type.startsWith("image/")&&m(S)},N=()=>{m(null),x.current&&(x.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"panel-header glass-effect",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.12) 100%)",backdropFilter:"blur(20px) saturate(1.3)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.2)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100/70 dark:bg-blue-900/50 rounded-2xl backdrop-blur-sm",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"é—®é¢˜ç«¯"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:r.problemRole})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(!t||t.length===0)&&e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-100/80 to-sky-100/80 dark:from-blue-900/30 dark:to-sky-900/30 rounded-full shadow-inner backdrop-blur-sm mx-auto mb-3 w-fit",children:e.jsx(ie,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("p",{className:"text-sm",children:"åœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„éœ€æ±‚æˆ–é—®é¢˜"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡è¾“å…¥"})]}),t&&t.map((j,S)=>e.jsxs("div",{className:"space-y-2",children:[j.type==="user"&&e.jsx(R,{type:"slide-right",show:!0,children:e.jsxs("div",{className:"message-bubble message-user slide-in-right",children:[j.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:URL.createObjectURL(j.image),alt:"ç”¨æˆ·ä¸Šä¼ ",className:"max-w-full h-auto rounded-lg shadow-md"})}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ie,{className:"w-4 h-4 text-white mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap select-text",children:j.text})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(j.timestamp).toLocaleTimeString()})]})]})]})}),j.type==="ai_response"&&e.jsx(R,{type:"slide-left",show:!0,children:e.jsx("div",{className:"message-bubble message-ai slide-in-left",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap select-text",children:j.text})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(j.timestamp).toLocaleTimeString()})]})]})})})]},S)),o&&e.jsx("div",{className:"message-bubble message-ai",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-600"}),e.jsx(at,{message:"AIæ­£åœ¨åˆ†æžæ‚¨çš„é—®é¢˜"})]})}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"p-4 border-t border-white/20 dark:border-white/10 glass-effect rounded-b-2xl",children:e.jsx("form",{onSubmit:d,className:"space-y-3",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:s,onChange:j=>l(j.target.value),placeholder:`ä½œä¸º${r.problemRole}ï¼Œè¯·æè¿°æ‚¨çš„éœ€æ±‚...`,className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:3,readOnly:o}),c&&e.jsx(R,{type:"scale",show:!0,children:e.jsxs("div",{className:"mt-3 relative inline-block",children:[e.jsx("img",{src:URL.createObjectURL(c),alt:"é¢„è§ˆ",className:"max-w-xs h-auto rounded-lg border border-gray-300 shadow-md"}),e.jsx("button",{type:"button",onClick:N,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 shadow-lg transition-all duration-200 hover:scale-110",children:"Ã—"})]})}),o&&e.jsx("div",{className:"mt-2",children:e.jsx(rt,{message:"æ­£åœ¨å‘é€æ¶ˆæ¯..."})})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:w,className:"hidden",id:"image-upload"}),e.jsx("button",{type:"submit",disabled:!s.trim()&&!c||o,className:"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",title:"å‘é€æ¶ˆæ¯",children:e.jsx(Re,{className:"w-5 h-5"})})]})]})})})]})},ot=({processing:r,messages:t})=>{const n=h.useRef(null),o=()=>{var s;(s=n.current)==null||s.scrollIntoView({behavior:"smooth"})};return h.useEffect(()=>{o()},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-white/20 dark:border-white/10 glass-effect rounded-t-2xl",style:{background:"linear-gradient(135deg, rgba(147, 51, 234, 0.15) 0%, rgba(99, 102, 241, 0.12) 100%)",backdropFilter:"blur(20px) saturate(1.3)"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500/90 to-indigo-600/90 rounded-2xl backdrop-blur-sm",children:e.jsx(W,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"AI ä¸­ä»‹å¤„ç†"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"æ™ºèƒ½åˆ†æžå’Œæ–¹æ¡ˆç”Ÿæˆ"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-4",children:[t.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400 space-y-4",children:[e.jsx(R,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 rounded-full shadow-inner div-with-background",children:e.jsx(Xe,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})}),e.jsx("p",{className:"text-lg",children:"LLMä¸­ä»‹å°†åœ¨è¿™é‡Œå¤„ç†æ‚¨çš„è¯·æ±‚"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 max-w-md",children:[e.jsx(R,{type:"slide-up",show:!0,delay:100,children:e.jsxs("div",{className:"p-4 div-with-background rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(X,{className:"w-6 h-6 mb-2 text-amber-500"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"åˆ†æžéœ€æ±‚"})]})}),e.jsx(R,{type:"slide-up",show:!0,delay:200,children:e.jsxs("div",{className:"p-4 div-with-background rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(st,{className:"w-6 h-6 mb-2 text-blue-500"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"ç”Ÿæˆæ–¹æ¡ˆ"})]})}),e.jsx(R,{type:"slide-up",show:!0,delay:300,children:e.jsxs("div",{className:"p-4 div-with-background rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(Ye,{className:"w-6 h-6 mb-2 text-green-500"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"ä¼˜åŒ–ç»“æžœ"})]})})]})]}),(t.length>0||r)&&e.jsx(R,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 glass-effect div-with-background",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"AIæ­£åœ¨å¤„ç†ä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"å¤„ç†å®Œæˆ"})]})}),t.length>0&&e.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:["å·²å¤„ç† ",t.length," ä¸ªè¯·æ±‚"]})]})]})})}),e.jsx("div",{ref:n})]})]})},lt=({scenario:r,messages:t,onSendMessage:n,isProcessing:o,iterationProcessing:s,iterationMode:l,pendingResponse:c,onGenerateSuggestion:m,onGenerateFollowUp:p,onConfirmSend:x,onCancelIteration:i,missingInfoOptions:d,showMissingInfoPanel:w,onToggleMissingInfoOption:N,onGenerateFollowUpBySelectedInfo:j,onSkipInfoCollection:S,onAcceptSuggestion:_,onRejectSuggestion:k,onNegotiateSuggestion:$,onCancelNegotiation:D,onSendNegotiationRequest:B,onAcceptFollowUp:A,onRejectFollowUp:K,onNegotiateFollowUp:Y,onCancelFollowUpNegotiation:ee,onSendFollowUpNegotiationRequest:te})=>{const[P,F]=h.useState(""),Z=({messageId:g,onSendNegotiation:T,onCancel:U})=>{const[f,b]=h.useState(""),[u,y]=h.useState(!1),C=async()=>{if(!(!f.trim()||u)){y(!0);try{await T(g,f),b("")}catch(M){console.error("å‘é€åå•†è¯·æ±‚å¤±è´¥:",M)}finally{y(!1)}}};return e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"åå•†æ¨¡å¼"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:f,onChange:M=>b(M.target.value),placeholder:"è¯·æè¿°æ‚¨å¸Œæœ›å¦‚ä½•ä¿®æ”¹è¿™ä¸ªå»ºè®®...",className:"w-full p-2 text-sm border border-blue-200 dark:border-blue-700 rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-blue-900/30 dark:text-blue-100",rows:3,disabled:u}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:C,disabled:!f.trim()||u,children:u?"å‘é€ä¸­...":"å‘é€åå•†"}),e.jsx("button",{className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors text-sm",onClick:()=>U(g),disabled:u,children:"å–æ¶ˆ"})]})]})]})},[O,V]=h.useState(""),J=h.useRef(null),se=()=>{var g;(g=J.current)==null||g.scrollIntoView({behavior:"smooth"})};h.useEffect(()=>{se()},[t]),h.useEffect(()=>{l&&c&&V(c)},[l,c]);const re=g=>{g.preventDefault(),P.trim()&&(n({text:P.trim(),timestamp:new Date().toISOString()}),F(""))},H=()=>{O.trim()&&(x(O.trim()),V(""))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-white/20 dark:border-white/10 glass-effect rounded-t-2xl",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(16, 185, 129, 0.12) 100%)",backdropFilter:"blur(20px) saturate(1.3)"},children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100/70 dark:bg-emerald-900/50 rounded-2xl backdrop-blur-sm",children:e.jsx(he,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"è§£å†³æ–¹æ¡ˆ"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.solutionRole})]})]})})}),l&&e.jsx(R,{type:"slide-down",show:!0,children:e.jsxs("div",{className:"p-3",style:{background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(147,197,253,0.06) 100%)",backdropFilter:"blur(14px) saturate(1.2)",WebkitBackdropFilter:"blur(14px) saturate(1.2)",border:"1px solid rgba(147,197,253,0.25)",borderRadius:"12px"},children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-800 dark:text-blue-200",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"è¿­ä»£æ¨¡å¼ - è¯·ç¡®è®¤æœ€ç»ˆå›žå¤å†…å®¹"})]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:'æ‚¨å¯ä»¥ç»§ç»­ç¼–è¾‘å†…å®¹ï¼Œç¡®è®¤æ— è¯¯åŽç‚¹å‡»"ç¡®è®¤å‘é€"å°†å›žå¤å‘é€ç»™å®¢æˆ·'})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4 p-4",children:[(!t||t.length===0)&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400 space-y-4",children:[e.jsx(R,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-100/80 to-emerald-100/80 dark:from-green-900/30 dark:to-emerald-900/30 rounded-full shadow-inner backdrop-blur-sm",children:e.jsx(he,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:"text-lg",children:"ç­‰å¾…æŽ¥æ”¶LLMç¿»è¯‘çš„éœ€æ±‚"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"åœ¨æ­¤åŸºç¡€ä¸Šæä¾›å®šåˆ¶åŒ–è§£å†³æ–¹æ¡ˆ"})]}),t&&t.map((g,T)=>e.jsx(R,{type:g.type==="user"?"slide-right":"slide-left",show:!0,children:e.jsxs("div",{className:"space-y-2",children:[g.type==="llm_request"&&e.jsx("div",{className:"message-bubble text-blue-900 shadow-sm hover:shadow-md transition-all duration-200",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(147, 197, 253, 0.06) 100%)",backdropFilter:"blur(20px) saturate(1.3)",WebkitBackdropFilter:"blur(20px) saturate(1.3)",border:"1px solid rgba(147, 197, 253, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-semibold text-white mb-1",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"æ¥è‡ªLLMçš„æ™ºèƒ½åˆ†æžéœ€æ±‚"}),g.needsAnalysis&&e.jsxs("div",{className:"mb-2 p-2 rounded text-sm",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(147, 197, 253, 0.08) 100%)",backdropFilter:"blur(10px) saturate(1.2)",WebkitBackdropFilter:"blur(10px) saturate(1.2)",border:"1px solid rgba(147, 197, 253, 0.25)",borderRadius:"8px"},children:[e.jsx("strong",{children:"éœ€æ±‚ç†è§£ï¼š"}),g.needsAnalysis]}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 select-text",children:g.text})}),g.missingInfoOptions&&g.missingInfoOptions.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-orange-100 border-l-4 border-orange-400 rounded text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ge,{className:"w-3 h-3 text-orange-600"}),e.jsxs("span",{className:"text-orange-800 font-medium",children:["å‘çŽ° ",g.missingInfoOptions.length," ä¸ªå¯äº†è§£çš„ä¿¡æ¯ç‚¹"]})]}),e.jsx("div",{className:"text-orange-700 text-xs mt-1",children:"å»ºè®®äº†è§£æ›´å¤šä¿¡æ¯ä»¥æä¾›æ›´ç²¾å‡†çš„æœåŠ¡"})]}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(g.timestamp).toLocaleTimeString()})]})]})}),g.type==="user"&&e.jsx("div",{className:"message-bubble text-green-900 ml-auto shadow-sm hover:shadow-md transition-all duration-200",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(134, 239, 172, 0.06) 100%)",backdropFilter:"blur(20px) saturate(1.3)",WebkitBackdropFilter:"blur(20px) saturate(1.3)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ie,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 select-text",children:g.text})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(g.timestamp).toLocaleTimeString()})]})]})}),g.type==="ai_response"&&e.jsx("div",{className:"message-bubble message-ai shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"LLMä¼˜åŒ–åŽçš„å“åº”"}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 select-text",children:g.text})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(g.timestamp).toLocaleTimeString()})]})]})}),g.type==="suggestion"&&e.jsx("div",{className:"message-bubble text-purple-900 shadow-sm hover:shadow-md transition-all duration-200",style:{background:"linear-gradient(135deg, rgba(168,85,247,0.08) 0%, rgba(221,214,254,0.06) 100%)",backdropFilter:"blur(14px) saturate(1.2)",WebkitBackdropFilter:"blur(14px) saturate(1.2)",border:"1px solid rgba(168,85,247,0.25)",borderRadius:"12px"},children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-semibold text-white mb-1",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"AIç”Ÿæˆçš„å»ºè®®"}),e.jsx("div",{className:"cursor-pointer rounded p-2 transition-colors",onClick:()=>F(g.text),title:"ç‚¹å‡»å¡«å…¥è¾“å…¥æ¡†",style:{background:"linear-gradient(135deg, rgba(168,85,247,0.06) 0%, rgba(221,214,254,0.05) 100%)",border:"1px solid rgba(168,85,247,0.2)",maxHeight:"none",overflowY:"visible",width:"100%",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 select-text",style:{margin:0,padding:0,lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:g.text})}),e.jsx("div",{className:"mt-3",children:g.feedbackGiven?e.jsx("div",{className:`text-sm px-3 py-1 rounded ${g.accepted?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:g.accepted?"âœ“ å·²æŽ¥å—å»ºè®®":"â†» å·²æ‹’ç»ï¼Œé‡æ–°ç”Ÿæˆä¸­..."}):g.negotiating?e.jsx(Z,{messageId:g.id,onSendNegotiation:B,onCancel:D}):g.negotiated?e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:["âœ“ å·²åå•†ä¿®æ”¹",e.jsxs("details",{className:"mt-1",children:[e.jsx("summary",{className:"cursor-pointer text-xs text-blue-600 hover:text-blue-800",children:"æŸ¥çœ‹åå•†è¯¦æƒ…"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"åŽŸå§‹å»ºè®®:"})," ",g.originalText]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("strong",{children:"åå•†è¦æ±‚:"})," ",g.negotiationRequest]})]})]})]})}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>_&&_(g.id),className:"flex-1 px-3 py-2 text-white rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(255, 255, 255, 0.25)"},title:"æŽ¥å—è¿™ä¸ªå»ºè®®",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"æŽ¥å—å»ºè®®"})]}),e.jsxs("button",{onClick:()=>$&&$(g.id),className:"flex-1 px-3 py-2 text-white rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(255, 255, 255, 0.25)"},title:"ä¸ŽAIåå•†ä¿®æ”¹å»ºè®®",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"åå•†"})]}),e.jsxs("button",{onClick:()=>k&&k(g.id),className:"flex-1 px-3 py-2 text-white rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(255, 255, 255, 0.25)"},title:"è¦æ±‚é‡æ–°ç”Ÿæˆ",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"é‡æ–°ç”Ÿæˆ"})]})]})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(g.timestamp).toLocaleTimeString()})]})]})}),g.type==="followup"&&e.jsx("div",{className:"message-bubble text-orange-900 shadow-sm hover:shadow-md transition-all duration-200",style:{background:"linear-gradient(135deg, rgba(251, 146, 60, 0.08) 0%, rgba(254, 215, 170, 0.06) 100%)",backdropFilter:"blur(14px) saturate(1.2)",WebkitBackdropFilter:"blur(14px) saturate(1.2)",border:"1px solid rgba(251, 146, 60, 0.25)",borderRadius:"12px"},children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-semibold text-white mb-1",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"AIç”Ÿæˆçš„è¿½é—®"}),e.jsx("div",{className:"cursor-pointer rounded p-2 transition-colors",onClick:()=>F(g.text),title:"ç‚¹å‡»å¡«å…¥è¾“å…¥æ¡†",style:{background:"linear-gradient(135deg, rgba(251, 146, 60, 0.06) 0%, rgba(254, 215, 170, 0.05) 100%)",border:"1px solid rgba(251, 146, 60, 0.2)",maxHeight:"none",overflowY:"visible",width:"100%",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 select-text",style:{margin:0,padding:0,lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:g.text})}),e.jsx("div",{className:"mt-3",children:g.feedbackGiven?e.jsx("div",{className:`text-sm px-3 py-1 rounded ${g.accepted?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:g.accepted?"âœ“ å·²æŽ¥å—è¿½é—®":"â†» å·²æ‹’ç»ï¼Œé‡æ–°ç”Ÿæˆä¸­..."}):g.negotiating?e.jsx(Z,{messageId:g.id,onSendNegotiation:te,onCancel:ee}):g.negotiated?e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:["âœ“ å·²åå•†ä¿®æ”¹",e.jsxs("details",{className:"mt-1",children:[e.jsx("summary",{className:"cursor-pointer text-xs text-blue-600 hover:text-blue-800",children:"æŸ¥çœ‹åå•†è¯¦æƒ…"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"åŽŸå§‹è¿½é—®:"})," ",g.originalText]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("strong",{children:"åå•†è¦æ±‚:"})," ",g.negotiationRequest]})]})]})]})}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>A&&A(g.id),className:"flex-1 px-3 py-2 text-green-700 rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"linear-gradient(135deg, rgba(16,185,129,0.12) 0%, rgba(52,211,153,0.1) 100%)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(16,185,129,0.25)"},title:"æŽ¥å—è¿™ä¸ªè¿½é—®",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"æŽ¥å—è¿½é—®"})]}),e.jsxs("button",{onClick:()=>Y&&Y(g.id),className:"flex-1 px-3 py-2 text-blue-700 rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"linear-gradient(135deg, rgba(59,130,246,0.12) 0%, rgba(147,197,253,0.1) 100%)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(59,130,246,0.25)"},title:"ä¸ŽAIåå•†ä¿®æ”¹è¿½é—®",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"åå•†"})]}),e.jsxs("button",{onClick:()=>K&&K(g.id),className:"flex-1 px-3 py-2 text-red-700 rounded-lg transition-colors flex items-center justify-center space-x-1 text-sm",style:{background:"linear-gradient(135deg, rgba(248,113,113,0.12) 0%, rgba(252,165,165,0.1) 100%)",backdropFilter:"blur(8px) saturate(1.2)",WebkitBackdropFilter:"blur(8px) saturate(1.2)",border:"1px solid rgba(248,113,113,0.25)"},title:"è¦æ±‚é‡æ–°ç”Ÿæˆ",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"é‡æ–°ç”Ÿæˆ"})]})]})}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:new Date(g.timestamp).toLocaleTimeString()})]})]})})]})},T)),s&&e.jsx(R,{type:"fade",show:!0,children:e.jsx("div",{className:"message-bubble message-ai border border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-purple-700 dark:text-purple-400"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"AIæ­£åœ¨ç”Ÿæˆ..."})]})})}),o&&!s&&e.jsx(R,{type:"fade",show:!0,children:e.jsx("div",{className:"message-bubble message-ai border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-green-700 dark:text-green-400"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:J})]}),w&&e.jsx(R,{type:"slide-up",show:!0,children:e.jsx("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700/50",style:{background:"linear-gradient(135deg, rgba(251, 146, 60, 0.08) 0%, rgba(251, 191, 36, 0.06) 100%)",backdropFilter:"blur(20px) saturate(1.3)",WebkitBackdropFilter:"blur(20px) saturate(1.3)",border:"1px solid rgba(251, 146, 60, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-orange-800 dark:text-orange-200",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"é€‰æ‹©å¸Œæœ›äº†è§£çš„ä¿¡æ¯"})]}),e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"AIåˆ†æžå‘çŽ°å¯ä»¥äº†è§£ä»¥ä¸‹ä¿¡æ¯ä»¥æä¾›æ›´ç²¾å‡†çš„æœåŠ¡ï¼Œè¯·é€‰æ‹©æ‚¨å¸Œæœ›è¯¢é—®çš„ä¿¡æ¯ç‚¹ï¼š"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:d.map((g,T)=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${g.selected?"border-orange-300 bg-orange-100 dark:bg-orange-900/30":"border-gray-200 bg-white dark:bg-gray-800 hover:border-orange-200"}`,onClick:()=>N(T),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center ${g.selected?"border-orange-500 bg-orange-500":"border-gray-300"}`,children:g.selected&&e.jsx(He,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:g.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:g.description})]})]})},T))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:j,disabled:s||!d.some(g=>g.selected),className:"flex-1 btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-2",title:"ç”Ÿæˆè¿½é—®",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"ç”Ÿæˆä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsxs("span",{children:["ç”Ÿæˆè¿½é—® (",d.filter(g=>g.selected).length,")"]})]})}),e.jsx("button",{onClick:S,disabled:s,className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"è·³è¿‡ï¼Œç›´æŽ¥å›žå¤",children:e.jsx("span",{children:"è·³è¿‡"})})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"é€‰æ‹©ä¿¡æ¯ç‚¹åŽï¼ŒAIå°†ç”Ÿæˆè‡ªç„¶æµç•…çš„è¿½é—®ä¾›æ‚¨ä½¿ç”¨"})]})})}),l&&e.jsx(R,{type:"slide-up",show:!0,children:e.jsx("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700/50",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(254, 240, 138, 0.06) 100%)",backdropFilter:"blur(20px) saturate(1.3)",WebkitBackdropFilter:"blur(20px) saturate(1.3)",border:"1px solid rgba(251, 191, 36, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"ç¼–è¾‘æœ€ç»ˆå›žå¤å†…å®¹"})]}),e.jsx("textarea",{value:O,onChange:g=>V(g.target.value),placeholder:"ç¼–è¾‘æœ€ç»ˆå›žå¤å†…å®¹...",className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:4,readOnly:o}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:H,disabled:!O.trim()||o,className:"flex-1 btn-primary p-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-2",title:"ç¡®è®¤å‘é€ç»™å®¢æˆ·",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"ç¡®è®¤å‘é€"})]}),e.jsxs("button",{onClick:i,disabled:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"å–æ¶ˆè¿­ä»£",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"å–æ¶ˆ"})]})]})]})})}),!l&&e.jsx("div",{className:"p-4 border-t border-white/20 dark:border-white/10 glass-effect rounded-b-2xl",children:e.jsxs("form",{onSubmit:re,className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:P,onChange:g=>F(g.target.value),placeholder:`ä½œä¸º${r.solutionRole}ï¼Œè¯·æä¾›æ‚¨çš„ä¸“ä¸šå»ºè®®...`,className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:3,readOnly:o||s})}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsx("button",{type:"submit",disabled:!P.trim()||o||s,className:"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200 hover:scale-105",title:"å‘é€è§£å†³æ–¹æ¡ˆ",children:e.jsx(Re,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:m,disabled:s||!t||t.length===0,className:"flex-1 px-3 py-2 text-white rounded-2xl transition-all hover:scale-105 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-sm",style:{background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(14px) saturate(1.2)",WebkitBackdropFilter:"blur(14px) saturate(1.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},title:"AIç”Ÿæˆå»ºè®®",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"ç”Ÿæˆä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"font-semibold text-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.35)"},children:"ç”Ÿæˆç›¸åº”å»ºè®®"})]})}),e.jsx("button",{type:"button",onClick:p,disabled:s||!t||t.length===0,className:"flex-1 px-3 py-2 text-white rounded-2xl transition-all hover:scale-105 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-sm",style:{background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(14px) saturate(1.2)",WebkitBackdropFilter:"blur(14px) saturate(1.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},title:"AIç”Ÿæˆè¿½é—®",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-orange-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"ç”Ÿæˆä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"font-semibold text-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.35)"},children:"ç”Ÿæˆç›¸åº”è¿½é—®"})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ðŸ’¡ åŸºäºŽLLMä¸­ä»‹çš„åˆ†æžç»“æžœæä¾›è§£å†³æ–¹æ¡ˆ"})})]})})]})},it=({scenarios:r,currentScenario:t,onScenarioChange:n})=>(r[t],e.jsx("div",{className:"flex items-center space-x-2",children:Object.values(r).map(o=>{const s=o.id===t;return e.jsxs("button",{onClick:()=>n(o.id),className:"flex items-center space-x-2 px-4 py-3 rounded-2xl border transition-all duration-200 backdrop-blur-sm "+(s?"bg-white/20 text-white border-white/50 shadow-lg backdrop-blur-md":"bg-white/10 text-white border-white/25 hover:bg-white/20 backdrop-blur-md"),title:o.description,children:[e.jsx("div",{className:"p-1.5 rounded-xl transition-all duration-200 "+(s?"bg-white/25 text-white backdrop-blur-sm":"bg-white/15 text-white backdrop-blur-sm"),children:e.jsx(o.icon,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-sm font-medium",children:o.name})]},o.id)})})),ct=()=>{const[r,t]=h.useState([]),n=h.useCallback(c=>{const m=Date.now()+Math.random(),p={id:m,type:"info",duration:5e3,...c};t(x=>[...x,p]),p.duration>0&&setTimeout(()=>{o(m)},p.duration)},[]),o=h.useCallback(c=>{t(m=>m.filter(p=>p.id!==c))},[]);h.useEffect(()=>{window.showNotification=n},[n]);const s=c=>{switch(c){case"success":return e.jsx(le,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(Be,{className:"w-5 h-5 text-yellow-600"});default:return e.jsx(Ke,{className:"w-5 h-5 text-blue-600"})}},l=c=>{switch(c){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return r.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(c=>e.jsx("div",{className:`max-w-sm w-full border rounded-lg p-4 shadow-lg transition-all duration-300 transform translate-x-0 ${l(c.type)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[s(c.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[c.title&&e.jsx("h4",{className:"text-sm font-medium mb-1",children:c.title}),e.jsx("p",{className:"text-sm",children:c.message})]}),e.jsx("button",{onClick:()=>o(c.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ie,{className:"w-4 h-4"})})]})},c.id))})},$e=(r,t="info",n={})=>{window.showNotification&&window.showNotification({message:r,type:t,...n})},dt=(r,t={})=>{$e(r,"success",t)},pt=(r,t={})=>{$e(r,"info",t)},ut=({onClearMessages:r,onToggleSettings:t,onFocusInput:n})=>(h.useEffect(()=>{const o=s=>{const l=s.ctrlKey||s.metaKey;s.shiftKey,s.altKey;const c=["INPUT","TEXTAREA"].includes(s.target.tagName);if(l&&s.key==="k"&&!c){s.preventDefault(),r(),pt("å·²æ¸…ç©ºæ‰€æœ‰æ¶ˆæ¯",{duration:2e3});return}if(l&&s.key===","&&!c){s.preventDefault(),t();return}if(l&&s.key==="/"&&!c){s.preventDefault(),ve();return}if(l&&s.key==="1"&&!c){s.preventDefault(),n("problem");return}if(l&&s.key==="3"&&!c){s.preventDefault(),n("solution");return}if(s.key==="Escape"){document.querySelectorAll("[data-modal]").forEach(p=>{p.style.display!=="none"&&(p.style.display="none")});return}if(s.key==="F1"){s.preventDefault(),ve();return}};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[r,t,n]),null),ve=()=>{const r=[{key:"Ctrl/Cmd + K",description:"æ¸…ç©ºæ‰€æœ‰æ¶ˆæ¯"},{key:"Ctrl/Cmd + ,",description:"æ‰“å¼€è®¾ç½®"},{key:"Ctrl/Cmd + /",description:"æ˜¾ç¤ºå¿«æ·é”®å¸®åŠ©"},{key:"Ctrl/Cmd + 1",description:"èšç„¦åˆ°é—®é¢˜ç«¯è¾“å…¥æ¡†"},{key:"Ctrl/Cmd + 3",description:"èšç„¦åˆ°æ–¹æ¡ˆç«¯è¾“å…¥æ¡†"},{key:"Esc",description:"å–æ¶ˆå½“å‰æ“ä½œ"},{key:"F1",description:"æ˜¾ç¤ºå¸®åŠ©"}];r.map(n=>`${n.key}: ${n.description}`).join(`
`);const t=document.createElement("div");t.setAttribute("data-modal","shortcuts-help"),t.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",t.innerHTML=`
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-900">é”®ç›˜å¿«æ·é”®</h3>
        <button class="text-gray-400 hover:text-gray-600" onclick="this.closest('[data-modal]').remove()">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="space-y-3">
        ${r.map(n=>`
          <div class="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
            <span class="text-sm text-gray-600">${n.description}</span>
            <kbd class="px-2 py-1 text-xs font-mono bg-gray-100 rounded border">${n.key}</kbd>
          </div>
        `).join("")}
      </div>
      <div class="mt-6 text-center">
        <button 
          class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"
          onclick="this.closest('[data-modal]').remove()"
        >
          å…³é—­
        </button>
      </div>
    </div>
  `,t.addEventListener("click",n=>{n.target===t&&t.remove()}),document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&t.remove()},1e4)},mt=({isOpen:r,onClose:t,settings:n,onUpdateSettings:o})=>{const[s,l]=h.useState(n),c=h.useRef(null);h.useEffect(()=>{l(n)},[n]),h.useEffect(()=>{const i=d=>{c.current&&!c.current.contains(d.target)&&r&&t()};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r,t]);const m=(i,d)=>{l(w=>({...w,[i]:d}))},p=()=>{o(s),dt("è®¾ç½®å·²ä¿å­˜",{duration:2e3}),t()},x=()=>{const i={darkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,fontSize:"medium",soundEnabled:!0,autoScroll:!0,showTimestamps:!0,language:"zh-CN",apiEndpoint:"https://api.example.com/v1",maxMessagesPerPanel:50};l(i)};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{ref:c,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden transition-all duration-300 transform scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"è®¾ç½®"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"å¤–è§‚"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.darkMode?e.jsx(Ze,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):e.jsx(Qe,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"æ·±è‰²æ¨¡å¼"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.darkMode,onChange:i=>m("darkMode",i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"å­—ä½“å¤§å°"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:s.fontSize})]}),e.jsxs("select",{value:s.fontSize,onChange:i=>m("fontSize",i.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"small",children:"å°"}),e.jsx("option",{value:"medium",children:"ä¸­"}),e.jsx("option",{value:"large",children:"å¤§"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"è¡Œä¸º"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.soundEnabled?e.jsx(et,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):e.jsx(tt,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"å£°éŸ³æç¤º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.soundEnabled,onChange:i=>m("soundEnabled",i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.autoScroll,onChange:i=>m("autoScroll",i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"æ˜¾ç¤ºæ¶ˆæ¯æ—¶é—´æˆ³"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.showTimestamps,onChange:i=>m("showTimestamps",i.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"é«˜çº§è®¾ç½®"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"è¯­è¨€"}),e.jsxs("select",{value:s.language,onChange:i=>m("language",i.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"zh-CN",children:"ç®€ä½“ä¸­æ–‡"}),e.jsx("option",{value:"en-US",children:"English (US)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"APIç«¯ç‚¹"}),e.jsx("input",{type:"text",value:s.apiEndpoint,onChange:i=>m("apiEndpoint",i.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://api.example.com/v1"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"æ¯ä¸ªé¢æ¿æœ€å¤§æ¶ˆæ¯æ•°"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.maxMessagesPerPanel})]}),e.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:s.maxMessagesPerPanel,onChange:i=>m("maxMessagesPerPanel",parseInt(i.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-650",children:"é‡ç½®"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-650",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-primary-700 dark:hover:bg-primary-600",children:"ä¿å­˜"})]})]})]})}):null},ne={baseURL:"https://api.deepbricks.ai/v1/",model:"GPT-5-Chat",apiKey:"sk-lNVAREVHjj386FDCd9McOL7k66DZCUkTp6IbV0u9970qqdlg"},L=(r,t=2e3)=>typeof r!="string"||r.length<=t?r:r.slice(0,t)+"â€¦(truncated)",I=async(r,t=.7,n=4096)=>{var o,s,l,c;try{const m=typeof import.meta<"u"&&{BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!1;console.group("[LLM] Request Details"),console.log("ðŸ”¹ Model:",ne.model),console.log("ðŸ”¹ Temperature:",t),console.log("ðŸ”¹ Total Messages:",r.length),console.group("ðŸ“ Complete Prompt Content");try{r.forEach((d,w)=>{console.group(`ðŸ’¬ Message ${w+1}: [${d.role.toUpperCase()}]`),console.log(d.content),console.groupEnd()})}catch(d){console.log("Error displaying messages:",d)}if(console.groupEnd(),m){console.group("ðŸ”§ Debug Info (JSON Format)");try{console.log("messages JSON:",JSON.stringify(r,null,2))}catch{console.log("Failed to serialize messages to JSON")}console.groupEnd()}console.time("[LLM] â±ï¸ Request Latency");const p=await fetch(`${ne.baseURL}chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne.apiKey}`},body:JSON.stringify({model:ne.model,messages:r,temperature:t,max_tokens:n,stream:!1})});if(!p.ok){console.timeEnd("[LLM] â±ï¸ Request Latency"),console.log("âŒ HTTP Status:",p.status,p.statusText);let d="";try{const N=await p.json();console.log("âŒ API Error Details:",N),d=((o=N.error)==null?void 0:o.message)||N.message||""}catch{console.log("âŒ Failed to parse error response")}console.groupEnd();const w=d?`APIè°ƒç”¨å¤±è´¥: ${p.status} ${p.statusText} - ${d}`:`APIè°ƒç”¨å¤±è´¥: ${p.status} ${p.statusText}`;throw new Error(w)}const x=await p.json(),i=(c=(l=(s=x==null?void 0:x.choices)==null?void 0:s[0])==null?void 0:l.message)==null?void 0:c.content;if(console.timeEnd("[LLM] â±ï¸ Request Latency"),console.group("ðŸ“¤ Response Details"),x!=null&&x.usage&&console.log("ðŸ’° Token Usage:",x.usage),console.log("âœ… Response Length:",(i==null?void 0:i.length)||0,"characters"),console.groupEnd(),console.group("ðŸ“‹ Complete Response Content"),console.log(i||"(Empty response)"),console.groupEnd(),m){console.group("ðŸ”§ Raw Response Data");try{console.log("Full API Response:",JSON.stringify(x,null,2))}catch{console.log("Failed to serialize response data")}console.groupEnd()}return console.groupEnd(),i}catch(m){try{console.groupEnd()}catch{}throw console.groupCollapsed("[LLM] Error"),console.error("é­”æ­APIè°ƒç”¨é”™è¯¯:",m),console.groupEnd(),m}},be=r=>{if(!r)return r;const t=["éžå¸¸æŠ±æ­‰","æŠ±æ­‰","æˆ‘æœªèƒ½ç†è§£","è¯·æ‚¨è¯¦ç»†æè¿°","ä¿¡æ¯ä¸è¶³","è‹¥æœ‰ä¸ç¬¦è¯·æŒ‡æ­£","ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ ã€‚","è¯·é—®ä½ çŽ°åœ¨æ˜¯åœ¨å¯»æ‰¾ä»€ä¹ˆç±»åž‹çš„å•†å“","è¡£æœã€éž‹å­è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆå°ç‰©ä»¶","æ„Ÿè°¢æ‚¨çš„åé¦ˆ","æˆ‘ä»¬éžå¸¸é‡è§†","å¦‚æžœæ‚¨æœ‰ä»»ä½•é—®é¢˜","å¦‚éœ€.*å¸®åŠ©","è¯·éšæ—¶è”ç³»","å®¢æœå›¢é˜Ÿ","æ”¯æŒå›¢é˜Ÿ","ä¸ºæ‚¨æä¾›æ»¡æ„çš„è§£å†³æ–¹æ¡ˆ","æˆ‘ä»¬ä¼šå°½åŠ›.*è§£å†³","æ•¬è¯·è°…è§£","å¿½ç•¥æœ¬æ¬¡å¯¹è¯","ç»§ç»­æµè§ˆå…¶ä»–æœåŠ¡æˆ–ä¿¡æ¯","æ¬¢è¿Ž.*è”ç³»æˆ‘ä»¬"];let n=r;return t.forEach(o=>{const s=new RegExp(o,"g");n=n.replace(s,"")}),n.trim()},q=r=>{if(!r)return r;const t=["^éžå¸¸æŠ±æ­‰.*$","^æŠ±æ­‰.*$","æˆ‘æœªèƒ½ç†è§£æ‚¨çš„éœ€æ±‚","è¯·æ‚¨è¯¦ç»†æè¿°ä¸€ä¸‹","ä¿¡æ¯ä¸è¶³ï¼Œæ— æ³•","è‹¥æœ‰ä¸ç¬¦è¯·æŒ‡æ­£","æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼Œæˆ‘ä»¬éžå¸¸é‡è§†","å¦‚æžœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»","å®¢æœå›¢é˜Ÿä¼šä¸ºæ‚¨","æ”¯æŒå›¢é˜Ÿä¼šä¸ºæ‚¨","æ•¬è¯·è°…è§£"];let n=r;return t.forEach(o=>{const s=new RegExp(o,"gm");n=n.replace(s,"")}),n.trim()},xt=r=>{if(!r)return r;const t=r.trim();return/[ã€‚.!ï¼Ÿï¼?]$/.test(t)?t:t+"ã€‚"},Oe=r=>{if(!r)return r;let t=r.trim();return/[ã€‚.!ï¼ï¼Ÿ?]$/.test(t)||(t=t+"ã€‚"),t},Q=r=>{if(!r)return r;let t=r.trim();return t=t.replace(/^(ä½ å¥½|æ‚¨å¥½|å—¨|hello|hi)[ï¼!ï¼Œ,ã€‚\s]*/i,""),t=t.replace(/^(å¾ˆé«˜å…´[\s\S]{0,20}?)[ã€‚.!ï¼ï¼Ÿ!?]+\s*/i,""),t=t.replace(/^(æ„Ÿè°¢[\s\S]{0,20}?)[ã€‚.!ï¼ï¼Ÿ!?]+\s*/i,""),t=t.replace(/^(è°¢è°¢[\s\S]{0,20}?)[ã€‚.!ï¼ï¼Ÿ!?]+\s*/i,""),t.trim()},fe=r=>{if(!r)return!0;const t=r.trim();return!!(t.length<12||/^(ä½ å¥½|æ‚¨å¥½|å—¨|hello|hi)/i.test(t)||/[èƒ½ä¼šå¯]$/.test(t)||/([ï¼Œã€,;ï¼›]\s*)$/.test(t)||/(çš„|åœ°|å¾—|æˆ–|å’Œ|åŠ|ä¸Ž|ä½†|ä¸”|è€Œ|æŠŠ|è¢«|ä¸º|å› |äºŽ|å¯¹|ç»™|å‘|åœ¨|ç”¨|åˆ°|å°±|ä»¥)$/.test(t)||/(ä»¥ä¾¿|ä¸ºäº†|æ¯”å¦‚|ä¾‹å¦‚)$/.test(t))},ye=r=>{if(!r)return!0;const t=r.trim();return!!(!/[ã€‚.!ï¼ï¼Ÿ?]$/.test(t)&&t.length<30||/(ä»¥ä¾¿|ä¸ºäº†)$/.test(t)||/(çš„|åœ°|å¾—)$/.test(t)||/([ï¼Œã€,;ï¼›])$/.test(t))},we=(r,{mode:t="suggestion",scenario:n="retail"}={})=>{if(!r)return r;let o=r.trim();if(/ä»¥ä¾¿$/.test(o)&&(o+=t==="followup"?"æˆ‘ä»¬æ›´å‡†ç¡®åœ°äº†è§£æ‚¨çš„éœ€æ±‚":"ä¸ºæ‚¨æä¾›æ›´åˆé€‚çš„æ–¹æ¡ˆ"),/(çš„|åœ°|å¾—)$/.test(o)){let s="å†…å®¹";t==="suggestion"?s=n==="enterprise"?"æ–¹æ¡ˆ":n==="education"?"å­¦ä¹ æ–¹æ¡ˆ":"äº§å“":t==="followup"&&(s="ä¿¡æ¯"),o+=s}return o=o.replace(/[ï¼Œã€,;ï¼›]\s*$/,"ã€‚"),o},me=(r,t)=>{for(const n of t){const o=r.indexOf(n);if(o!==-1)return{idx:o,keyword:n}}return{idx:-1,keyword:""}},G=(r,t="èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡",n=6)=>{if(!r||r.length===0)return console.log("â„¹ï¸ No chat history available for context"),"";console.group("ðŸ” Chat History Analysis"),console.log(`ðŸ“Š Total History Messages: ${r.length}`),console.log(`ðŸ“ Using Recent Messages: ${Math.min(r.length,n)}`);const o=r.slice(-n);return o.forEach((l,c)=>{var i,d,w;let m="AIå¤„ç†";if(l.type==="user")if(l.panel==="problem")m="å®¢æˆ·";else if(l.panel==="solution")m="ä¼ä¸šç«¯";else{const N=((i=l.text)==null?void 0:i.toLowerCase())||"";N.includes("é€€è´§")||N.includes("æŠ•è¯‰")||N.includes("ä¸æ»¡")||N.includes("cnm")||N.includes("è‰")||N.includes("å¦ˆ")?m="å®¢æˆ·":m="ä¼ä¸šç«¯"}else l.type==="ai_response"?m=l.panel==="problem"?"ç³»ç»Ÿå›žå¤ç»™å®¢æˆ·":"ç³»ç»Ÿå›žå¤ç»™ä¼ä¸šç«¯":l.type==="llm_request"&&(m="AIéœ€æ±‚è½¬è¯‘");const p=(d=l.text)==null?void 0:d.substring(0,100),x=((w=l.text)==null?void 0:w.length)>100?"...":"";console.log(`${c+1}. [${m}]: ${p}${x}`),console.log(`   ðŸ” Debug: type="${l.type}", panel="${l.panel}", timestamp="${l.timestamp}"`)}),console.groupEnd(),`

${t}ï¼š
`+o.map((l,c)=>{var p,x;let m="AIå¤„ç†";if(l.type==="user")if(l.panel==="problem")m="å®¢æˆ·";else if(l.panel==="solution")m="ä¼ä¸šç«¯";else{console.warn(`âš ï¸ æ¶ˆæ¯panelå­—æ®µå¼‚å¸¸: panel="${l.panel}", å†…å®¹é¢„è§ˆ: "${(p=l.text)==null?void 0:p.substring(0,50)}..."`);const i=((x=l.text)==null?void 0:x.toLowerCase())||"";i.includes("é€€è´§")||i.includes("æŠ•è¯‰")||i.includes("ä¸æ»¡")||i.includes("cnm")||i.includes("è‰")||i.includes("å¦ˆ")?(m="å®¢æˆ·",console.log("ðŸ”§ æ™ºèƒ½æŽ¨æ–­: æ ¹æ®å†…å®¹ç‰¹å¾åˆ¤æ–­ä¸ºå®¢æˆ·æ¶ˆæ¯")):m="ä¼ä¸šç«¯"}else l.type==="ai_response"?m=l.panel==="problem"?"ç³»ç»Ÿå›žå¤ç»™å®¢æˆ·":"ç³»ç»Ÿå›žå¤ç»™ä¼ä¸šç«¯":l.type==="llm_request"&&(m="AIéœ€æ±‚è½¬è¯‘");return`${c+1}. ${m}: ${l.text}`}).join(`
`)},je=r=>{const t=typeof r=="string"?r:"",n={translation:"",solutionsText:"",confirmationsText:""},o=["ã€éœ€æ±‚è½¬è¯‘ã€‘","ã€éœ€æ±‚ç¿»è¯‘ã€‘","ã€è½¬è¯‘ç»“æžœã€‘","ã€éœ€æ±‚æ¾„æ¸…ã€‘","éœ€æ±‚è½¬è¯‘","éœ€æ±‚ç¿»è¯‘","è½¬è¯‘ç»“æžœ","éœ€æ±‚æ¾„æ¸…","å®¢æˆ·éœ€æ±‚è½¬è¯‘","ç”¨æˆ·éœ€æ±‚è½¬è¯‘"],s=["ã€è§£å†³æ–¹æ¡ˆå»ºè®®ã€‘","ã€å»ºè®®æ–¹æ¡ˆã€‘","ã€è¡ŒåŠ¨å»ºè®®ã€‘","è§£å†³æ–¹æ¡ˆå»ºè®®","å»ºè®®çš„è§£å†³æ–¹æ¡ˆ","æ–¹æ¡ˆå»ºè®®","è¡ŒåŠ¨å»ºè®®"],l=["ã€å¾…ç¡®è®¤ä¿¡æ¯ã€‘","ã€éœ€ç¡®è®¤ä¿¡æ¯ã€‘","ã€å¾…ç¡®è®¤ã€‘","å¾…ç¡®è®¤ä¿¡æ¯","éœ€ç¡®è®¤ä¿¡æ¯"],c=me(t,o),m=me(t,s),p=me(t,l),x=i=>{if(i===-1)return t.length;const d=[m.idx,p.idx,t.length].filter(w=>w!==-1&&w>i);return Math.min(...d)};if(c.idx!==-1){const i=c.idx+c.keyword.length,d=x(c.idx);n.translation=t.slice(i,d).trim()}else m.idx!==-1&&(n.translation=t.slice(0,m.idx).trim());if(m.idx!==-1){const i=m.idx+m.keyword.length,d=p.idx!==-1?p.idx:t.length;n.solutionsText=t.slice(i,d).trim()}if(p.idx!==-1){const i=p.idx+p.keyword.length;n.confirmationsText=t.slice(i).trim()}if(!n.translation){const i=m.idx!==-1?m.idx:t.search(/\n?\s*(æ–¹æ¡ˆ|é€‰é¡¹|å»ºè®®)\s*[1-9]/);if(i!==-1&&i>0)n.translation=t.slice(0,i).trim();else{const d=t.slice(0,500),w=d.split(/\n{2,}/);n.translation=(w[0]||d).trim()}}return n},gt=async(r,t,n,o=[])=>{try{const s={retail:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ²Ÿé€šåŠ©æ‰‹ï¼Œä¸“é—¨åœ¨é¡¾å®¢ä¸Žä¼ä¸šé—¨åº—ä¹‹é—´æä¾›ç²¾å‡†çš„éœ€æ±‚è½¬è¯‘å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)å‡†ç¡®ç†è§£é¡¾å®¢çš„çœŸå®žéœ€æ±‚å’Œæ½œåœ¨æ„å›¾ 2)å°†å…¶è½¬åŒ–ä¸ºä¼ä¸šèƒ½å¤Ÿç†è§£å’Œæ‰§è¡Œçš„ä¸“ä¸šæè¿° 3)åŸºäºŽä¼ä¸šèƒ½åŠ›æä¾›å…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆé€‰é¡¹ 4)æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šé›¶å”®é¡¾å®¢-é—¨åº—æ²Ÿé€šã€‚ä½ éœ€è¦åŒæ—¶ç†è§£åŒæ–¹å¯èƒ½å­˜åœ¨çš„è¡¨è¾¾åå·®ï¼šé¡¾å®¢å¯èƒ½è¡¨è¾¾ä¸æ¸…æ™°æˆ–æœ‰éšå«éœ€æ±‚ï¼Œä¼ä¸šå¯èƒ½ç”¨ä¸“ä¸šæœ¯è¯­å›žå¤ã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. æ·±åº¦ç†è§£ï¼šåˆ†æžé¡¾å®¢çš„æ˜¾æ€§éœ€æ±‚å’Œéšæ€§éœ€æ±‚ï¼Œè¯†åˆ«å¯èƒ½çš„è¡¨è¾¾åå·®
2. ç²¾å‡†è½¬è¯‘ï¼šå°†é¡¾å®¢éœ€æ±‚è½¬åŒ–ä¸ºåŒ…å«äº§å“ç±»åž‹ã€ä½¿ç”¨åœºæ™¯ã€é¢„ç®—èŒƒå›´ã€è§„æ ¼è¦æ±‚ç­‰å…³é”®ä¿¡æ¯çš„ä¸“ä¸šæè¿°
3. æ–¹æ¡ˆå»ºè®®ï¼šåŸºäºŽè½¬è¯‘ç»“æžœï¼Œä¸ºä¼ä¸šæä¾›2-3ä¸ªå…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆé€‰é¡¹ï¼ŒåŒ…å«äº§å“æŽ¨èã€æœåŠ¡å»ºè®®ã€ä»·æ ¼åŒºé—´ç­‰
4. è¯­è¨€å‡€åŒ–ï¼šå½“é‡åˆ°ä¸å½“è¡¨è¾¾ã€ç²—ä¿—è¯­è¨€æˆ–æƒ…ç»ªåŒ–è¯æ±‡æ—¶ï¼Œéœ€è¦æ™ºèƒ½è¯†åˆ«å…¶èƒŒåŽçš„å®žé™…æ„å›¾ï¼Œè½¬åŒ–ä¸ºä¸“ä¸šã€ä¸­æ€§çš„è¡¨è¿°ï¼Œç»ä¸ç›´æŽ¥å¼•ç”¨æˆ–é‡å¤åŽŸå§‹ä¸å½“å†…å®¹`,example:`ä¾‹å¦‚ï¼šé¡¾å®¢è¯´"æˆ‘éœ€è¦ä¸€ä»¶é€‚åˆå•†åŠ¡åœºåˆçš„è¡£æœ" â†’ è½¬è¯‘ï¼š"é¡¾å®¢éœ€è¦å•†åŠ¡æ­£è£…ï¼Œç”¨äºŽé‡è¦ä¼šè®®ï¼Œé¢„ç®—å¾…ç¡®è®¤ï¼Œéœ€è¦ä¸“ä¸šå½¢è±¡" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)æŽ¨èç»å…¸å•†åŠ¡è¥¿è£…å¥—è£…ï¼Œä»·æ ¼800-1500å…ƒï¼ŒåŒ…å«å…è´¹ä¿®æ”¹æœåŠ¡ 2)æŽ¨èå•†åŠ¡ä¼‘é—²è£…ï¼Œä»·æ ¼500-800å…ƒï¼Œé€‚åˆæ—¥å¸¸å•†åŠ¡åœºåˆ 3)æä¾›ä¸ªäººå½¢è±¡é¡¾é—®æœåŠ¡ï¼Œæ ¹æ®å…·ä½“éœ€æ±‚å®šåˆ¶æ­é…æ–¹æ¡ˆ"

ä¸å½“è¯­è¨€å¤„ç†ä¾‹å¦‚ï¼šé¡¾å®¢è¾“å…¥ä¸å½“è¡¨è¾¾æ—¶ â†’ è½¬è¯‘ï¼š"å®¢æˆ·è¡¨è¾¾äº†å¼ºçƒˆçš„æƒ…ç»ªï¼Œå¯èƒ½å¯¹äº§å“ã€æœåŠ¡æˆ–ä½“éªŒå­˜åœ¨ä¸æ»¡ã€‚éœ€è¦äº†è§£å…·ä½“é—®é¢˜æ‰€åœ¨ï¼Œä»¥ä¾¿æä¾›é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆ" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)ä¸»åŠ¨è¯¢é—®å…·ä½“é‡åˆ°çš„é—®é¢˜æˆ–å›°éš¾ 2)æä¾›å®¢æœä¸“å‘˜ä¸€å¯¹ä¸€æ²Ÿé€š 3)æ ¹æ®é—®é¢˜æ€§è´¨å®‰æŽ’ç›¸å…³éƒ¨é—¨è·Ÿè¿›å¤„ç†"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ²Ÿé€šåŠ©æ‰‹ï¼Œä¸“é—¨åœ¨ä¼ä¸šè·¨éƒ¨é—¨ä¹‹é—´æä¾›ç²¾å‡†çš„éœ€æ±‚è½¬è¯‘å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)å‡†ç¡®ç†è§£ä¸šåŠ¡éƒ¨é—¨çš„éœ€æ±‚å’ŒæŠ€æœ¯éƒ¨é—¨çš„èƒ½åŠ›è¾¹ç•Œ 2)æ¶ˆé™¤éƒ¨é—¨é—´çš„æ²Ÿé€šåå·® 3)æä¾›å…·ä½“å¯è¡Œçš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆé€‰é¡¹ 4)æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šä¼ä¸šå†…éƒ¨è·¨éƒ¨é—¨æ²Ÿé€šã€‚ä½ éœ€è¦ç†è§£ä¸åŒéƒ¨é—¨çš„è¯­è¨€å·®å¼‚ï¼šä¸šåŠ¡éƒ¨é—¨å…³æ³¨æ•ˆæžœå’Œæ—¶é—´ï¼ŒæŠ€æœ¯éƒ¨é—¨å…³æ³¨å¯è¡Œæ€§å’Œèµ„æºã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. éœ€æ±‚è§£æžï¼šå°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºæŠ€æœ¯å¯ç†è§£çš„åŠŸèƒ½è¦æ±‚ï¼ŒåŒ…å«å…·ä½“æŒ‡æ ‡ã€æ—¶é—´æœŸé™ã€èµ„æºçº¦æŸ
2. æ–¹æ¡ˆè®¾è®¡ï¼šåŸºäºŽæŠ€æœ¯èƒ½åŠ›æä¾›2-3ä¸ªä¸åŒå¤æ‚åº¦çš„è§£å†³æ–¹æ¡ˆé€‰é¡¹
3. é£Žé™©è¯„ä¼°ï¼šè¯†åˆ«å®žæ–½è¿‡ç¨‹ä¸­å¯èƒ½çš„æŠ€æœ¯é£Žé™©å’Œèµ„æºéœ€æ±‚
4. è¯­è¨€å‡€åŒ–ï¼šå½“é‡åˆ°ä¸å½“è¡¨è¾¾ã€ç²—ä¿—è¯­è¨€æˆ–æƒ…ç»ªåŒ–è¯æ±‡æ—¶ï¼Œéœ€è¦æ™ºèƒ½è¯†åˆ«å…¶èƒŒåŽçš„å®žé™…æ„å›¾ï¼Œè½¬åŒ–ä¸ºä¸“ä¸šã€ä¸­æ€§çš„è¡¨è¿°ï¼Œç»ä¸ç›´æŽ¥å¼•ç”¨æˆ–é‡å¤åŽŸå§‹ä¸å½“å†…å®¹`,example:`ä¾‹å¦‚ï¼šå¸‚åœºéƒ¨è¯´"æˆ‘ä»¬éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ" â†’ è½¬è¯‘ï¼š"éœ€è¦å¼€å‘ç”¨æˆ·ä½“éªŒä¼˜åŒ–åŠŸèƒ½ï¼Œç›®æ ‡æå‡ç”¨æˆ·ç•™å­˜çŽ‡ï¼Œæ—¶é—´3ä¸ªæœˆå†…" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å¿«é€Ÿæ–¹æ¡ˆï¼šä¼˜åŒ–çŽ°æœ‰ç•Œé¢å’Œäº¤äº’ï¼Œé¢„è®¡æå‡10%ç•™å­˜çŽ‡ï¼Œéœ€è¦2å‘¨ï¼Œæˆæœ¬5ä¸‡ 2)ä¸­ç­‰æ–¹æ¡ˆï¼šé‡æ–°è®¾è®¡æ ¸å¿ƒæµç¨‹ï¼Œé¢„è®¡æå‡25%ç•™å­˜çŽ‡ï¼Œéœ€è¦6å‘¨ï¼Œæˆæœ¬15ä¸‡ 3)æ·±åº¦æ–¹æ¡ˆï¼šå…¨é¢é‡æž„ç”¨æˆ·ä½“éªŒï¼Œé¢„è®¡æå‡40%ç•™å­˜çŽ‡ï¼Œéœ€è¦3ä¸ªæœˆï¼Œæˆæœ¬40ä¸‡"

ä¸å½“è¯­è¨€å¤„ç†ä¾‹å¦‚ï¼šéƒ¨é—¨è¡¨è¾¾ä¸å½“æƒ…ç»ªæ—¶ â†’ è½¬è¯‘ï¼š"éƒ¨é—¨è¡¨è¾¾äº†å¯¹å½“å‰é¡¹ç›®è¿›å±•çš„å¼ºçƒˆå…³åˆ‡ï¼Œå¯èƒ½å­˜åœ¨æ²Ÿé€šåè°ƒæˆ–èµ„æºé…ç½®æ–¹é¢çš„é—®é¢˜ã€‚éœ€è¦æ˜Žç¡®å…·ä½“çš„é—®é¢˜ç‚¹å’Œæ”¹è¿›æ–¹å‘" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å®‰æŽ’è·¨éƒ¨é—¨åè°ƒä¼šè®®ï¼Œæ˜Žç¡®å„æ–¹èŒè´£å’Œæ—¶é—´èŠ‚ç‚¹ 2)è¯„ä¼°å½“å‰èµ„æºé…ç½®æ˜¯å¦åˆç†ï¼Œè°ƒæ•´äººåŠ›æˆ–é¢„ç®—åˆ†é… 3)å»ºç«‹å®šæœŸæ²Ÿé€šæœºåˆ¶ï¼ŒåŠæ—¶å‘çŽ°å’Œè§£å†³é—®é¢˜"`},education:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ•™å­¦åŠ©æ‰‹ï¼Œä¸“é—¨åœ¨å­¦ç”Ÿä¸Žæ•™å¸ˆä¹‹é—´æä¾›ç²¾å‡†çš„å­¦ä¹ éœ€æ±‚è½¬è¯‘å’Œæ•™å­¦æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)æ·±åº¦ç†è§£å­¦ç”Ÿçš„å­¦ä¹ å›°éš¾å’ŒçŸ¥è¯†ç›²ç‚¹ 2)å°†å…¶è½¬åŒ–ä¸ºæ•™å¸ˆå¯æ“ä½œçš„æ•™å­¦è¦ç‚¹ 3)æä¾›å¤šæ ·åŒ–çš„æ•™å­¦è§£å†³æ–¹æ¡ˆé€‰é¡¹ 4)æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šå¸ˆç”Ÿäº’åŠ¨çš„å­¦ä¹ æ²Ÿé€šã€‚ä½ éœ€è¦ç†è§£å­¦ä¹ è¿‡ç¨‹ä¸­çš„è®¤çŸ¥åå·®ï¼šå­¦ç”Ÿå¯èƒ½æ— æ³•å‡†ç¡®è¡¨è¾¾å›°éš¾ç‚¹ï¼Œæ•™å¸ˆå¯èƒ½ç”¨è¿‡äºŽä¸“ä¸šçš„è¯­è¨€å›žå¤ã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. å­¦ä¹ è¯Šæ–­ï¼šåˆ†æžå­¦ç”Ÿçš„å…·ä½“å›°éš¾ç‚¹ã€çŸ¥è¯†èƒŒæ™¯ã€å­¦ä¹ é£Žæ ¼
2. æ•™å­¦è½¬è¯‘ï¼šå°†å­¦ä¹ éœ€æ±‚è½¬åŒ–ä¸ºåŒ…å«çŸ¥è¯†ç‚¹ã€éš¾ç‚¹åˆ†æžã€æ•™å­¦ç›®æ ‡çš„ä¸“ä¸šæè¿°
3. æ–¹æ¡ˆå»ºè®®ï¼šæä¾›2-3ç§ä¸åŒæ•™å­¦æ–¹æ³•çš„å…·ä½“å®žæ–½æ–¹æ¡ˆ
4. è¯­è¨€å‡€åŒ–ï¼šå½“é‡åˆ°ä¸å½“è¡¨è¾¾ã€ç²—ä¿—è¯­è¨€æˆ–æƒ…ç»ªåŒ–è¯æ±‡æ—¶ï¼Œéœ€è¦æ™ºèƒ½è¯†åˆ«å…¶èƒŒåŽçš„å®žé™…æ„å›¾ï¼Œè½¬åŒ–ä¸ºä¸“ä¸šã€ä¸­æ€§çš„è¡¨è¿°ï¼Œç»ä¸ç›´æŽ¥å¼•ç”¨æˆ–é‡å¤åŽŸå§‹ä¸å½“å†…å®¹`,example:`ä¾‹å¦‚ï¼šå­¦ç”Ÿè¯´"æˆ‘ä¸æ‡‚è¿™ä¸ªæ¦‚å¿µ" â†’ è½¬è¯‘ï¼š"å­¦ç”Ÿå¯¹é‡å­ç‰©ç†æ³¢ç²’äºŒè±¡æ€§æ¦‚å¿µç†è§£å›°éš¾ï¼Œéœ€è¦ä»ŽåŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€šè¿‡å®žéªŒä¾‹å­å»ºç«‹è®¤çŸ¥" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å®žéªŒæ¼”ç¤ºæ³•ï¼šé€šè¿‡åŒç¼å®žéªŒç­‰ç»å…¸å®žéªŒï¼Œç›´è§‚å±•ç¤ºæ³¢ç²’äºŒè±¡æ€§ï¼Œé€‚åˆè§†è§‰å­¦ä¹ è€… 2)ç±»æ¯”æ•™å­¦æ³•ï¼šç”¨æ°´æ³¢å’Œå¼¹ç çš„ç±»æ¯”ï¼Œå¸®åŠ©ç†è§£æŠ½è±¡æ¦‚å¿µï¼Œé€‚åˆé€»è¾‘æ€ç»´å¼ºçš„å­¦ç”Ÿ 3)æ¸è¿›å¼æ•™å­¦ï¼šä»Žå…‰çš„åŸºæœ¬æ€§è´¨å¼€å§‹ï¼Œé€æ­¥å¼•å…¥é‡å­æ¦‚å¿µï¼Œé€‚åˆåŸºç¡€è¾ƒå¼±çš„å­¦ç”Ÿ"

ä¸å½“è¯­è¨€å¤„ç†ä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨è¾¾æŒ«è´¥æƒ…ç»ªæ—¶ â†’ è½¬è¯‘ï¼š"å­¦ç”Ÿåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°å›°éš¾ï¼Œè¡¨çŽ°å‡ºæŒ«è´¥æ„Ÿå’Œå­¦ä¹ åŽ‹åŠ›ã€‚éœ€è¦è°ƒæ•´æ•™å­¦æ–¹å¼ï¼Œæä¾›æ›´å¤šæ”¯æŒå’Œé¼“åŠ±" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)é™ä½Žå­¦ä¹ éš¾åº¦ï¼Œä»Žæ›´åŸºç¡€çš„çŸ¥è¯†ç‚¹å¼€å§‹è®²è§£ 2)é‡‡ç”¨é¼“åŠ±å¼æ•™å­¦æ–¹æ³•ï¼Œè‚¯å®šå­¦ç”Ÿçš„åŠªåŠ›å’Œè¿›æ­¥ 3)æä¾›ä¸ªåˆ«è¾…å¯¼ï¼Œé’ˆå¯¹æ€§è§£å†³å­¦ä¹ å›°éš¾"`}};if(!n||!s[n])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${n}ã€‚æ”¯æŒçš„åœºæ™¯: ${Object.keys(s).join(", ")}`);const l=s[n],c=G(o,"èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡",6),m={retail:`å¢žå¼ºæŒ‡ä»¤ï¼ˆé›¶å”®åœºæ™¯ä¸“ç”¨ï¼‰ï¼š
1. æ¶ˆè´¹å¿ƒç†æ´žå¯Ÿï¼šæ·±åº¦ç†è§£é¡¾å®¢çš„è´­ä¹°åŠ¨æœºã€ä»·æ ¼æ•æ„Ÿåº¦ã€å“è´¨æœŸæœ›å’Œä½¿ç”¨åœºæ™¯
2. äº§å“ä»·å€¼è½¬è¯‘ï¼šå°†æŠ€æœ¯å‚æ•°è½¬åŒ–ä¸ºå®žé™…ä½¿ç”¨ä»·å€¼ï¼Œçªå‡ºäº§å“å¦‚ä½•è§£å†³é¡¾å®¢çš„å…·ä½“é—®é¢˜
3. è´­ä¹°å†³ç­–æ”¯æŒï¼šæä¾›æ¸…æ™°çš„äº§å“å¯¹æ¯”ã€æ€§ä»·æ¯”åˆ†æžå’Œè´­ä¹°å»ºè®®ï¼Œé™ä½Žå†³ç­–æˆæœ¬
4. æœåŠ¡ä½“éªŒä¼˜åŒ–ï¼šå¼ºè°ƒå”®å‰å’¨è¯¢ã€å”®åŽä¿éšœç­‰æœåŠ¡ä»·å€¼ï¼Œæå‡è´­ä¹°ä¿¡å¿ƒ
5. ä¸ªæ€§åŒ–æŽ¨èï¼šåŸºäºŽé¡¾å®¢éœ€æ±‚ç‰¹å¾ï¼Œæä¾›ç²¾å‡†çš„äº§å“æŽ¨èå’Œæ­é…å»ºè®®
6. ä¿ƒé”€ç­–ç•¥èžå…¥ï¼šåˆç†èžå…¥ä¼˜æƒ ä¿¡æ¯ã€é™æ—¶æ´»åŠ¨ç­‰ï¼Œåˆ›é€ è´­ä¹°ç´§è¿«æ„Ÿ
7. é›¶å”®é£Žæ ¼é™åˆ¶ï¼šé¿å…è¿‡åº¦æŽ¨é”€è¯æœ¯ï¼Œç¦æ­¢ä½¿ç”¨"äº²"ã€"å“¦"ç­‰éžæ­£å¼ç”¨è¯­ï¼Œä¿æŒä¸“ä¸šå‹å¥½çš„é›¶å”®æœåŠ¡è¯­è°ƒ
8. é›¶å”®åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†é¡¾å®¢çš„ä¸æ»¡æƒ…ç»ªè½¬åŒ–ä¸ºå…·ä½“çš„äº§å“æˆ–æœåŠ¡æ”¹è¿›éœ€æ±‚ï¼Œé‡ç‚¹å…³æ³¨é€€æ¢è´§ã€è´¨é‡é—®é¢˜ã€ä»·æ ¼äº‰è®®ç­‰é›¶å”®å¸¸è§é—®é¢˜çš„ä¸“ä¸šåŒ–è¡¨è¾¾`,enterprise:`å¢žå¼ºæŒ‡ä»¤ï¼ˆä¼ä¸šåœºæ™¯ä¸“ç”¨ï¼‰ï¼š
1. å•†ä¸šä»·å€¼å¯¼å‘ï¼šå°†æŠ€æœ¯æ–¹æ¡ˆè½¬åŒ–ä¸ºå•†ä¸šæ”¶ç›Šã€æˆæœ¬èŠ‚çº¦ã€æ•ˆçŽ‡æå‡ç­‰å¯é‡åŒ–çš„ä»·å€¼æŒ‡æ ‡
2. å†³ç­–å±‚æ²Ÿé€šï¼šä½¿ç”¨å†³ç­–è€…å…³å¿ƒçš„è¯­è¨€ï¼Œçªå‡ºROIã€é£Žé™©æŽ§åˆ¶ã€ç«žäº‰ä¼˜åŠ¿ç­‰å…³é”®è¦ç´ 
3. å®žæ–½è·¯å¾„è§„åˆ’ï¼šæä¾›æ¸…æ™°çš„é¡¹ç›®æ—¶é—´çº¿ã€é‡Œç¨‹ç¢‘èŠ‚ç‚¹ã€èµ„æºé…ç½®å’Œé£Žé™©é¢„æ¡ˆ
4. è·¨éƒ¨é—¨åè°ƒï¼šè€ƒè™‘ä¸åŒéƒ¨é—¨çš„åˆ©ç›Šå’Œå…³åˆ‡ï¼Œæä¾›å¹³è¡¡å„æ–¹éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆ
5. åˆè§„æ€§ä¿éšœï¼šç¡®ä¿æ–¹æ¡ˆç¬¦åˆè¡Œä¸šè§„èŒƒã€æ³•å¾‹æ³•è§„å’Œä¼ä¸šå†…éƒ¨æ”¿ç­–è¦æ±‚
6. å¯æ‰©å±•æ€§è®¾è®¡ï¼šè€ƒè™‘ä¼ä¸šæœªæ¥å‘å±•éœ€æ±‚ï¼Œæä¾›å…·æœ‰å‰çž»æ€§çš„è§£å†³æ–¹æ¡ˆ
7. ä¼ä¸šé£Žæ ¼é™åˆ¶ï¼šä½¿ç”¨æ­£å¼å•†åŠ¡è¯­è¨€ï¼Œé¿å…å£è¯­åŒ–è¡¨è¾¾ï¼Œä¿æŒä¸“ä¸šä¸¥è°¨çš„ä¼ä¸šæ²Ÿé€šé£Žæ ¼
8. ä¼ä¸šåœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†éƒ¨é—¨é—´çš„å†²çªæˆ–ä¸æ»¡è½¬åŒ–ä¸ºæµç¨‹ä¼˜åŒ–ã€èµ„æºé…ç½®ã€æ²Ÿé€šæœºåˆ¶ç­‰ç®¡ç†å±‚é¢çš„æ”¹è¿›å»ºè®®ï¼Œé¿å…äººé™…å…³ç³»å±‚é¢çš„ç›´æŽ¥è¡¨è¾¾`,education:`å¢žå¼ºæŒ‡ä»¤ï¼ˆæ•™è‚²åœºæ™¯ä¸“ç”¨ï¼‰ï¼š
1. å­¦ä¹ å¿ƒç†å…³æ€€ï¼šç†è§£å­¦ç”Ÿçš„å­¦ä¹ åŽ‹åŠ›ã€è®¤çŸ¥ç‰¹ç‚¹å’Œæƒ…æ„Ÿéœ€æ±‚ï¼Œæä¾›æ¸©æš–æ”¯æŒçš„è¡¨è¾¾
2. çŸ¥è¯†ä½“ç³»æž„å»ºï¼šå°†å¤æ‚æ¦‚å¿µåˆ†è§£ä¸ºæ˜“ç†è§£çš„çŸ¥è¯†ç‚¹ï¼Œå»ºç«‹æ¸…æ™°çš„å­¦ä¹ è·¯å¾„
3. å­¦ä¹ æ–¹æ³•æŒ‡å¯¼ï¼šæ ¹æ®ä¸åŒå­¦ä¹ é£Žæ ¼ï¼Œæä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ ç­–ç•¥å’ŒæŠ€å·§å»ºè®®
4. æˆé•¿æ¿€åŠ±å¯¼å‘ï¼šå¼ºè°ƒå­¦ä¹ è¿‡ç¨‹ä¸­çš„è¿›æ­¥å’Œæˆå°±ï¼Œå»ºç«‹å­¦ç”Ÿçš„å­¦ä¹ ä¿¡å¿ƒ
5. å®¶æ ¡æ²Ÿé€šæ¡¥æ¢ï¼šå¹³è¡¡å­¦ç”Ÿéœ€æ±‚å’Œå®¶é•¿æœŸæœ›ï¼Œä¿ƒè¿›æœ‰æ•ˆçš„ä¸‰æ–¹æ²Ÿé€š
6. æ•™å­¦èµ„æºæ•´åˆï¼šåˆç†åˆ©ç”¨æ•™å­¦å·¥å…·ã€å‚è€ƒèµ„æ–™å’Œå®žè·µæœºä¼šï¼Œä¸°å¯Œå­¦ä¹ ä½“éªŒ
7. æ•™è‚²é£Žæ ¼é™åˆ¶ï¼šä½¿ç”¨é¼“åŠ±æ€§ã€å¯å‘æ€§è¯­è¨€ï¼Œé¿å…æ‰¹è¯„æˆ–è´Ÿé¢è¡¨è¾¾ï¼Œä¿æŒç§¯æžå‘ä¸Šçš„æ•™è‚²è¯­è°ƒ
8. æ•™è‚²åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†å­¦ç”Ÿçš„æŒ«è´¥æ„Ÿã€å­¦ä¹ å›°éš¾è½¬åŒ–ä¸ºå…·ä½“çš„å­¦ä¹ æ”¯æŒéœ€æ±‚ï¼Œé‡ç‚¹å…³æ³¨å­¦ä¹ æ–¹æ³•è°ƒæ•´ã€å¿ƒç†ç–å¯¼ã€ä¸ªåˆ«è¾…å¯¼ç­‰æ•™è‚²ä¸“ä¸šåŒ–è¡¨è¾¾`},p=[{role:"system",content:`${l.systemRole}

${l.instruction}

ã€é‡è¦ã€‘è¾“å…¥å†…å®¹è¿‡æ»¤å’Œæ™ºèƒ½å¤„ç†è§„åˆ™ï¼š
1. ä¸å½“è¨€è¯­å¤„ç†ï¼šå¦‚æžœç”¨æˆ·è¾“å…¥åŒ…å«è¾±éª‚ã€ç²—ä¿—ã€æ”»å‡»æ€§è¯æ±‡ï¼Œä¸è¦é‡å¤è¿™äº›å†…å®¹ï¼Œè€Œæ˜¯ï¼š
   - è¯†åˆ«ä¸º"ç”¨æˆ·æƒ…ç»ªåŒ–è¡¨è¾¾"æˆ–"æµ‹è¯•æ€§è¾“å…¥"
   - ç†è§£å¯èƒ½çš„çœŸå®žæ„å›¾ï¼ˆå¦‚è¡¨è¾¾ä¸æ»¡ã€å¯»æ±‚å¸®åŠ©ã€éšæ„æµ‹è¯•ç­‰ï¼‰
   - ä»¥ä¸“ä¸šã€å‹å¥½çš„æ–¹å¼å›žåº”

2. æ— æ„ä¹‰è¾“å…¥å¤„ç†ï¼šå¦‚æžœè¾“å…¥æ˜¯ï¼š
   - éšæœºå­—æ¯/æ•°å­—ç»„åˆï¼ˆå¦‚"cnm"ã€"123"ã€"aaa"ï¼‰
   - å•ä¸ªè¯æ±‡æ²¡æœ‰æ˜Žç¡®éœ€æ±‚å«ä¹‰
   - æ˜Žæ˜¾çš„æµ‹è¯•æ€§è¾“å…¥
   è¯†åˆ«ä¸º"éœ€è¦å¼•å¯¼çš„ç”¨æˆ·"ï¼Œå»ºè®®æä¾›çœŸå®žéœ€æ±‚

3. è´Ÿé¢æƒ…ç»ªè¯†åˆ«ï¼šå¦‚æžœè¾“å…¥è¡¨è¾¾ä¸æ»¡æˆ–è´Ÿé¢æƒ…ç»ªï¼Œè½¬åŒ–ä¸ºäº†è§£é—®é¢˜å’Œæä¾›å¸®åŠ©çš„æœºä¼š

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š

ã€éœ€æ±‚ç†è§£ã€‘
ç®€æ˜Žæ‰¼è¦åœ°æ€»ç»“ç”¨æˆ·çš„æ ¸å¿ƒéœ€æ±‚ï¼ˆä¸è¶…è¿‡30å­—ï¼‰
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸æ€»ç»“
- å¯¹äºŽä¸å½“è¾“å…¥ï¼šè¯´æ˜Ž"ç”¨æˆ·æµ‹è¯•è¾“å…¥"æˆ–"ç”¨æˆ·æƒ…ç»ªåŒ–è¡¨è¾¾"
- å¯¹äºŽæ— æ„ä¹‰è¾“å…¥ï¼šè¯´æ˜Ž"è¾“å…¥å†…å®¹ä¸æ˜Žç¡®ï¼Œéœ€è¦å¼•å¯¼"

ã€ä¿¡æ¯é€‰é¡¹ã€‘
é’ˆå¯¹å…·ä½“éœ€æ±‚ç”Ÿæˆé€‰é¡¹ï¼Œæ ¼å¼ï¼šé€‰é¡¹åç§°|è¯¢é—®åŽŸå› 
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸ç”Ÿæˆ3-5ä¸ªé€‰é¡¹
- å¯¹äºŽæ— æ•ˆè¾“å…¥ï¼šè¿”å›ž"æ— éœ€æ”¶é›†é¢å¤–ä¿¡æ¯"

ã€éœ€æ±‚è½¬è¯‘ã€‘
è½¬åŒ–ä¸ºä¸“ä¸šæè¿°ï¼š
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸è½¬è¯‘
- å¯¹äºŽä¸å½“è¾“å…¥ï¼šè½¬è¯‘ä¸º"é¡¾å®¢å¯èƒ½æ­£åœ¨æµ‹è¯•ç³»ç»Ÿæˆ–è¡¨è¾¾æƒ…ç»ªï¼Œå»ºè®®å‹å¥½å¼•å¯¼å…¶æä¾›å…·ä½“éœ€æ±‚"
- å¯¹äºŽæ— æ„ä¹‰è¾“å…¥ï¼šè½¬è¯‘ä¸º"é¡¾å®¢è¾“å…¥ä¸å¤Ÿæ˜Žç¡®ï¼Œå»ºè®®ä¸»åŠ¨è¯¢é—®å¯ä»¥ä¸ºå…¶æä¾›ä»€ä¹ˆå¸®åŠ©"`},{role:"user",content:`ç”¨æˆ·è¾“å…¥ï¼š"${r}"${t?`
ï¼ˆç”¨æˆ·è¿˜ä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡ï¼‰`:""}${c}

è¯·åˆ†æžè¿™ä¸ªè¾“å…¥ï¼Œå¦‚æžœæ˜¯ä¸å½“è¨€è¯­æˆ–æ— æ„ä¹‰å†…å®¹ï¼Œè¯·è¿›è¡Œæ™ºèƒ½å¤„ç†ã€‚`}],x=await I(p,.1),i=be(x),d=je(i),w=[{name:"éœ€æ±‚åˆ†æžä¸Žè½¬è¯‘",content:d.translation}];d.solutionsText&&w.push({name:"è§£å†³æ–¹æ¡ˆå»ºè®®",content:d.solutionsText}),d.confirmationsText&&d.confirmationsText!=="æ— "&&w.push({name:"å¾…ç¡®è®¤ä¿¡æ¯",content:d.confirmationsText});const N=d.translation;return console.groupCollapsed("[LLM] Parsed -> problem_input"),console.log("structuredOutput:",d),console.log("translatedMessage:",L(N)),console.groupEnd(),{steps:w,translatedMessage:N,structuredOutput:d}}catch(s){throw console.error("å¤„ç†é—®é¢˜è¾“å…¥æ—¶å‡ºé”™:",s),s}},ht=async(r,t,n=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸“ä¸šçš„å®¢æˆ·æ²Ÿé€šä¸“å®¶ï¼Œè´Ÿè´£å°†ä¼ä¸šçš„ä¸“ä¸šè¡¨è¿°è½¬åŒ–ä¸ºé¡¾å®¢å‹å¥½ã€æ˜“æ‡‚çš„å®Œæ•´å›žå¤ã€‚è¦æ±‚be briefï¼Œclearï¼Œapproachableã€‚ä¸è¦åˆ†ç‚¹å†™ã€‚ç”¨å®Œæ•´çš„å¥å­å†™ã€‚ä¸¤å¥è¯ä»¥å†…ï¼Œä¸è¶…è¿‡30ä¸ªå­—ã€‚è‡ªç„¶åœ°èžå…¥å¿…è¦çš„å»ºè®®ã€‚",context:"åœ¨é›¶å”®åœºæ™¯ä¸­ï¼Œä¼ä¸šé€šå¸¸ä¼šæä¾›äº§å“ä¿¡æ¯ã€ä»·æ ¼æ–¹æ¡ˆã€æœåŠ¡æ¡æ¬¾ç­‰ä¸“ä¸šå†…å®¹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºå®¢æˆ·å®¹æ˜“ç†è§£å’ŒæŽ¥å—çš„ç®€æ´å›žå¤ï¼Œè‡ªç„¶åœ°èžå…¥è¡ŒåŠ¨å»ºè®®ï¼Œå¸®åŠ©å®¢æˆ·è§£å†³é—®é¢˜æˆ–åšå‡ºå†³ç­–ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"è¯¥äº§å“é‡‡ç”¨è¿›å£ææ–™ï¼Œç¬¦åˆå›½é™…æ ‡å‡†ï¼Œæ‰¹å‘ä»·æ ¼ä¸ºå•ä»·80å…ƒï¼Œèµ·è®¢é‡100ä»¶ã€‚"
ä¼˜åŒ–åŽï¼š"è¿™æ¬¾äº§å“è¿›å£ææ–™ï¼Œå“è´¨ä¿éšœã€‚100ä»¶ä»¥ä¸Š80å…ƒ/ä»¶ï¼Œæ‚¨ç¡®è®¤ä¸‹æ•°é‡æˆ‘æ¥æŠ¥ä»·ã€‚"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šæœåŠ¡AIåŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£å°†æŠ€æœ¯æ–¹æ¡ˆå’Œå•†ä¸šææ¡ˆè½¬åŒ–ä¸ºå†³ç­–è€…æ˜“æ‡‚çš„è¡¨è¾¾ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åœ¨ä¼ä¸šæœåŠ¡åœºæ™¯ä¸­ï¼ŒæŠ€æœ¯å›¢é˜Ÿé€šå¸¸ä¼šæä¾›å¤æ‚çš„è§£å†³æ–¹æ¡ˆã€æŠ€æœ¯è§„æ ¼ã€å®žæ–½è®¡åˆ’ç­‰ã€‚ä½ éœ€è¦å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºä¸šåŠ¡å†³ç­–è€…èƒ½å¤Ÿç†è§£çš„è¯­è¨€ï¼Œçªå‡ºå•†ä¸šä»·å€¼å’Œå®žæ–½è·¯å¾„ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"æˆ‘ä»¬å»ºè®®é‡‡ç”¨å¾®æœåŠ¡æž¶æž„ï¼Œä½¿ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²ï¼Œé¢„è®¡å¼€å‘å‘¨æœŸ6ä¸ªæœˆï¼Œéœ€è¦æŠ•å…¥3åé«˜çº§å·¥ç¨‹å¸ˆã€‚"
ä¼˜åŒ–åŽï¼š"æˆ‘ä»¬ä¸ºæ‚¨è®¾è®¡äº†ä¸€å¥—çµæ´»å¯æ‰©å±•çš„ç³»ç»Ÿæž¶æž„ï¼Œå¯ä»¥æ”¯æŒæ‚¨ä¸šåŠ¡çš„å¿«é€Ÿå¢žé•¿ã€‚æ•´ä¸ªé¡¹ç›®å¤§çº¦éœ€è¦6ä¸ªæœˆå®Œæˆï¼Œæˆ‘ä»¬ä¼šå®‰æŽ’3ä½èµ„æ·±å·¥ç¨‹å¸ˆä¸“é—¨è´Ÿè´£ã€‚å»ºè®®æˆ‘ä»¬å…ˆå®‰æŽ’ä¸€æ¬¡è¯¦ç»†çš„éœ€æ±‚æ²Ÿé€šï¼Œä¸ºæ‚¨åˆ¶å®šå…·ä½“çš„å®žæ–½è®¡åˆ’å’Œæ—¶é—´èŠ‚ç‚¹ã€‚"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²æœåŠ¡AIåŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£å°†æ•™å­¦æ–¹æ¡ˆå’Œè¯¾ç¨‹å®‰æŽ’è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿æ˜“æ‡‚çš„è¡¨è¾¾ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åœ¨æ•™è‚²åœºæ™¯ä¸­ï¼Œæ•™å¸ˆå’Œæ•™åŠ¡äººå‘˜é€šå¸¸ä¼šæä¾›è¯¾ç¨‹å®‰æŽ’ã€æ•™å­¦è®¡åˆ’ã€å­¦ä¹ è¦æ±‚ç­‰ä¸“ä¸šå†…å®¹ã€‚ä½ éœ€è¦å°†è¿™äº›è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿å®¹æ˜“ç†è§£çš„è¯­è¨€ï¼Œçªå‡ºå­¦ä¹ ä»·å€¼å’Œå…·ä½“å®‰æŽ’ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"è¯¥è¯¾ç¨‹é‡‡ç”¨STEAMæ•™å­¦æ³•ï¼ŒåŒ…å«ç†è®ºè®²è§£å’Œå®žè·µæ“ä½œï¼Œæ¯å‘¨2è¯¾æ—¶ï¼Œå…±è®¡24è¯¾æ—¶ï¼Œéœ€è¦å‡†å¤‡å®žéªŒææ–™ã€‚"
ä¼˜åŒ–åŽï¼š"è¿™é—¨è¯¾ç¨‹ä¼šé€šè¿‡åŠ¨æ‰‹å®žè·µçš„æ–¹å¼è®©å­©å­å­¦ä¹ ï¼Œæ¯å‘¨å®‰æŽ’2èŠ‚è¯¾ï¼Œæ€»å…±12å‘¨å®Œæˆã€‚å­©å­ä»¬ä¼šåœ¨è¯¾å ‚ä¸Šè¿›è¡Œæœ‰è¶£çš„å®žéªŒå’Œé¡¹ç›®åˆ¶ä½œã€‚å»ºè®®æ‚¨æå‰ä¸ºå­©å­å‡†å¤‡ä¸€äº›åŸºç¡€çš„å®žéªŒææ–™ï¼Œæˆ‘ä»¬ä¼šæä¾›è¯¦ç»†çš„ææ–™æ¸…å•ã€‚"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}ã€‚æ”¯æŒçš„åœºæ™¯: ${Object.keys(o).join(", ")}`);const s=o[t],l=G(n,"èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡",6),c={retail:`å¢žå¼ºæŒ‡ä»¤ï¼ˆé›¶å”®æ–¹æ¡ˆä¼˜åŒ–ä¸“ç”¨ï¼‰ï¼š
1. è´­ä¹°ä½“éªŒä¼˜åŒ–ï¼šå°†ä¼ä¸šçš„äº§å“ä»‹ç»è½¬åŒ–ä¸ºé¡¾å®¢å…³å¿ƒçš„å®žé™…ä»·å€¼å’Œä½¿ç”¨ä½“éªŒ
2. ä»·æ ¼é€æ˜ŽåŒ–ï¼šæ¸…æ™°è¯´æ˜Žä»·æ ¼æž„æˆã€ä¼˜æƒ æ¡ä»¶å’Œæ€§ä»·æ¯”ä¼˜åŠ¿ï¼Œæ¶ˆé™¤ä»·æ ¼ç–‘è™‘
3. å†³ç­–ä¾¿åˆ©æ€§ï¼šæä¾›ç®€å•æ˜Žäº†çš„è´­ä¹°æµç¨‹å’Œå†³ç­–æ”¯æŒï¼Œé™ä½Žè´­ä¹°é—¨æ§›
4. ä¿¡ä»»å»ºç«‹ï¼šå¼ºè°ƒå“è´¨ä¿è¯ã€å”®åŽæœåŠ¡ã€é€€æ¢è´§æ”¿ç­–ç­‰ä¿¡ä»»è¦ç´ 
5. ä¸ªæ€§åŒ–å…³æ€€ï¼šæ ¹æ®é¡¾å®¢ç‰¹ç‚¹æä¾›ä¸ªæ€§åŒ–çš„äº§å“å»ºè®®å’Œä½¿ç”¨æŒ‡å¯¼
6. é›¶å”®è¯­è¨€é£Žæ ¼ï¼šä½¿ç”¨äº²åˆ‡ä½†ä¸“ä¸šçš„è¯­è°ƒï¼Œé¿å…è¿‡äºŽæ­£å¼æˆ–è¿‡äºŽéšæ„çš„è¡¨è¾¾
7. é›¶å”®åœºæ™¯ä¸å½“è¯­è¨€å‡€åŒ–ï¼šå°†ä¼ä¸šç«¯çš„æŠ€æœ¯æœ¯è¯­æˆ–ä¸å½“è¡¨è¾¾è½¬åŒ–ä¸ºé¡¾å®¢å‹å¥½çš„æ—¥å¸¸ç”¨è¯­`,enterprise:`å¢žå¼ºæŒ‡ä»¤ï¼ˆä¼ä¸šæ–¹æ¡ˆä¼˜åŒ–ä¸“ç”¨ï¼‰ï¼š
1. å•†ä¸šä»·å€¼çªå‡ºï¼šå°†æŠ€æœ¯æ–¹æ¡ˆè½¬åŒ–ä¸ºæ˜Žç¡®çš„å•†ä¸šæ”¶ç›Šå’Œç«žäº‰ä¼˜åŠ¿è¡¨è¿°
2. å†³ç­–æ”¯æŒå¼ºåŒ–ï¼šæä¾›æ¸…æ™°çš„æ–¹æ¡ˆå¯¹æ¯”ã€é£Žé™©è¯„ä¼°å’Œå®žæ–½å»ºè®®
3. æ²Ÿé€šæ•ˆçŽ‡æå‡ï¼šä½¿ç”¨å†³ç­–è€…ç†Ÿæ‚‰çš„å•†ä¸šè¯­è¨€ï¼Œé¿å…è¿‡åº¦æŠ€æœ¯åŒ–çš„è¡¨è¾¾
4. å®žæ–½å¯è¡Œæ€§ï¼šå¼ºè°ƒæ–¹æ¡ˆçš„å¯æ“ä½œæ€§ã€æ—¶é—´å®‰æŽ’å’Œèµ„æºéœ€æ±‚
5. é•¿æœŸä»·å€¼ä½“çŽ°ï¼šçªå‡ºæ–¹æ¡ˆå¯¹ä¼ä¸šé•¿æœŸå‘å±•çš„æˆ˜ç•¥ä»·å€¼
6. ä¼ä¸šè¯­è¨€é£Žæ ¼ï¼šä¿æŒæ­£å¼ä¸“ä¸šçš„å•†åŠ¡æ²Ÿé€šé£Žæ ¼ï¼Œä½“çŽ°æƒå¨æ€§å’Œå¯ä¿¡åº¦
7. ä¼ä¸šåœºæ™¯ä¸å½“è¯­è¨€å‡€åŒ–ï¼šå°†æŠ€æœ¯å›¢é˜Ÿçš„ä¸“ä¸šæœ¯è¯­æˆ–ä¸å½“è¡¨è¾¾è½¬åŒ–ä¸ºä¸šåŠ¡å‹å¥½çš„ç®¡ç†è¯­è¨€`,education:`å¢žå¼ºæŒ‡ä»¤ï¼ˆæ•™è‚²æ–¹æ¡ˆä¼˜åŒ–ä¸“ç”¨ï¼‰ï¼š
1. å­¦ä¹ ä»·å€¼ä¼ é€’ï¼šå°†æ•™å­¦å®‰æŽ’è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿èƒ½ç†è§£çš„å­¦ä¹ ä»·å€¼å’Œæˆé•¿æ”¶ç›Š
2. å­¦ä¹ ä½“éªŒä¼˜åŒ–ï¼šå¼ºè°ƒæ•™å­¦æ–¹æ³•çš„è¶£å‘³æ€§ã€äº’åŠ¨æ€§å’Œä¸ªæ€§åŒ–ç‰¹ç‚¹
3. æˆé•¿è·¯å¾„æ¸…æ™°ï¼šæä¾›æ˜Žç¡®çš„å­¦ä¹ ç›®æ ‡ã€è¿›åº¦å®‰æŽ’å’Œæˆæžœé¢„æœŸ
4. å®¶é•¿æ²Ÿé€šå‹å¥½ï¼šä½¿ç”¨å®¶é•¿å®¹æ˜“ç†è§£çš„æ•™è‚²è¯­è¨€ï¼Œé¿å…è¿‡äºŽä¸“ä¸šçš„æœ¯è¯­
5. å­¦ç”Ÿæ¿€åŠ±å¯¼å‘ï¼šå¼ºè°ƒå­¦ä¹ çš„ä¹è¶£å’Œæˆå°±æ„Ÿï¼Œå»ºç«‹å­¦ä¹ ä¿¡å¿ƒ
6. æ•™è‚²è¯­è¨€é£Žæ ¼ï¼šä½¿ç”¨æ¸©æš–é¼“åŠ±çš„è¯­è°ƒï¼Œä½“çŽ°æ•™è‚²çš„å…³æ€€å’Œä¸“ä¸šæ€§
7. æ•™è‚²åœºæ™¯ä¸å½“è¯­è¨€å‡€åŒ–ï¼šå°†æ•™å¸ˆçš„ä¸“ä¸šæœ¯è¯­æˆ–ä¸å½“è¡¨è¾¾è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿å‹å¥½çš„æ•™è‚²è¯­è¨€`},m=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

${c[t]}`},{role:"user",content:`ä¼ä¸šæ–¹æ¡ˆç«¯å›žå¤ï¼š"${r}"${l}

è¯·æŒ‰ç…§ä»¥ä¸‹ç»“æž„è¾“å‡ºï¼š

ã€ä¼˜åŒ–å›žå¤ã€‘
å°†ä¼ä¸šå›žå¤è½¬åŒ–ä¸ºå®¢æˆ·å‹å¥½ã€æ˜“æ‡‚çš„å®Œæ•´è¡¨è¾¾ã€‚å¦‚æžœéœ€è¦ç»™å®¢æˆ·æä¾›è¡ŒåŠ¨å»ºè®®ï¼Œè¯·ç›´æŽ¥èžå…¥åˆ°å›žå¤ä¸­ï¼Œä½¿ç”¨è‡ªç„¶çš„è¯­è¨€ï¼Œä¸è¦ä½¿ç”¨"é€‰é¡¹1ã€é€‰é¡¹2"è¿™ç§æ ¼å¼ï¼Œè€Œæ˜¯ç”¨"æ‚¨å¯ä»¥..."ã€"å»ºè®®æ‚¨..."ã€"å¦‚æžœæ‚¨éœ€è¦..."è¿™æ ·çš„è‡ªç„¶è¡¨è¾¾ã€‚

ã€å†…éƒ¨å¤‡æ³¨ã€‘
ï¼ˆä»…ä¾›ç³»ç»Ÿå‚è€ƒï¼Œä¸å‘é€ç»™å®¢æˆ·ï¼‰è®°å½•å¤„ç†è¦ç‚¹å’Œæ³¨æ„äº‹é¡¹

ã€è¡¥å……è¯´æ˜Žã€‘
å¦‚æœ‰éœ€è¦å•ç‹¬è¯´æ˜Žçš„é‡è¦ä¿¡æ¯ï¼Œè¯·åˆ—å‡ºï¼ˆå¦‚æ— åˆ™å†™"æ— "ï¼‰`}],p=await I(m,.1),x=be(p),i=x.match(/ã€ä¼˜åŒ–å›žå¤ã€‘\s*([\s\S]*?)(?=ã€å†…éƒ¨å¤‡æ³¨ã€‘|ã€è¡¥å……è¯´æ˜Žã€‘|$)/),d=x.match(/ã€å†…éƒ¨å¤‡æ³¨ã€‘\s*([\s\S]*?)(?=ã€è¡¥å……è¯´æ˜Žã€‘|$)/),w=x.match(/ã€è¡¥å……è¯´æ˜Žã€‘\s*([\s\S]*?)$/),N=i?i[1].trim():x,j=d?d[1].trim():"",S=w?w[1].trim():"",_=[{name:"è¯­è¨€ä¼˜åŒ–",content:N}];j&&j!=="æ— "&&_.push({name:"å†…éƒ¨å¤‡æ³¨",content:j}),S&&S!=="æ— "&&_.push({name:"è¡¥å……è¯´æ˜Ž",content:S});let k=N;return S&&S!=="æ— "&&(k+=`

`+S),console.groupCollapsed("[LLM] Parsed -> solution_response"),console.log("structuredOutput:",{optimizedReply:N,internalNotes:j,additionalInfo:S}),console.log("optimizedMessage:",L(k)),console.groupEnd(),{steps:_,optimizedMessage:k,structuredOutput:{optimizedReply:N,internalNotes:j,additionalInfo:S}}}catch(o){throw console.error("å¤„ç†æ–¹æ¡ˆå“åº”æ—¶å‡ºé”™:",o),o}},bt=async(r,t,n=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®é¡¾é—®ï¼Œä¸“é—¨ä¸ºä¼ä¸šé—¨åº—æä¾›é”€å”®å»ºè®®å’Œè§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå®¢æˆ·çš„éœ€æ±‚å’Œä¼ä¸šçš„æƒ…å†µï¼Œæä¾›ä¸“ä¸šçš„é”€å”®å»ºè®®ï¼ŒåŒ…æ‹¬äº§å“æŽ¨èã€ä»·æ ¼ç­–ç•¥ã€æœåŠ¡æ–¹æ¡ˆç­‰ã€‚",example:`å®¢æˆ·éœ€æ±‚ï¼š"éœ€è¦å•†åŠ¡è¥¿è£…ï¼Œé¢„ç®—800-1500å…ƒ"
å»ºè®®ï¼š"å»ºè®®æŽ¨èä¸‰æ¬¾äº§å“ï¼š1)ç»å…¸æ¬¾A123ï¼Œå”®ä»·1280å…ƒï¼Œæ„å¤§åˆ©é¢æ–™ï¼Œå…è´¹ä¿®æ”¹ï¼›2)çŽ°ä»£æ¬¾B456ï¼Œå”®ä»·1150å…ƒï¼Œèˆ’é€‚é€æ°”ï¼›3)é«˜ç«¯æ¬¾C789ï¼Œå”®ä»·1350å…ƒï¼Œæ—¶å°šå‰ªè£ã€‚é‡ç‚¹æŽ¨èA123ï¼Œæ€§ä»·æ¯”æœ€é«˜ï¼Œé€‚åˆå•†åŠ¡åœºåˆã€‚"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šæŠ€æœ¯é¡¾é—®ï¼Œä¸“é—¨ä¸ºæŠ€æœ¯å›¢é˜Ÿæä¾›è§£å†³æ–¹æ¡ˆå»ºè®®ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯çŽ°çŠ¶ï¼Œæä¾›æŠ€æœ¯æ–¹æ¡ˆå»ºè®®ï¼ŒåŒ…æ‹¬æž¶æž„è®¾è®¡ã€æŠ€æœ¯é€‰åž‹ã€å®žæ–½è®¡åˆ’ç­‰ã€‚",example:`ä¸šåŠ¡éœ€æ±‚ï¼š"æå‡ç”¨æˆ·ä½“éªŒï¼Œ3ä¸ªæœˆå†…å®Œæˆ"
å»ºè®®ï¼š"å»ºè®®é‡‡ç”¨æ¸è¿›å¼ä¼˜åŒ–æ–¹æ¡ˆï¼šç¬¬ä¸€é˜¶æ®µ(1ä¸ªæœˆ)ä¼˜åŒ–çŽ°æœ‰ç•Œé¢ï¼Œç¬¬äºŒé˜¶æ®µ(1.5ä¸ªæœˆ)é‡æž„æ ¸å¿ƒæµç¨‹ï¼Œç¬¬ä¸‰é˜¶æ®µ(0.5ä¸ªæœˆ)æ€§èƒ½ä¼˜åŒ–ã€‚é¢„è®¡æŠ•å…¥3åå¼€å‘äººå‘˜ï¼Œæ€»æˆæœ¬30ä¸‡å…ƒã€‚"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²é¡¾é—®ï¼Œä¸“é—¨ä¸ºæ•™å¸ˆæä¾›æ•™å­¦æ–¹æ¡ˆå»ºè®®ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå­¦ç”Ÿçš„å­¦ä¹ éœ€æ±‚å’Œæ•™å­¦çŽ°çŠ¶ï¼Œæä¾›æ•™å­¦å»ºè®®ï¼ŒåŒ…æ‹¬æ•™å­¦æ–¹æ³•ã€è¯¾ç¨‹å®‰æŽ’ã€å­¦ä¹ æŒ‡å¯¼ç­‰ã€‚",example:`å­¦ç”Ÿéœ€æ±‚ï¼š"ç†è§£é‡å­ç‰©ç†æ³¢ç²’äºŒè±¡æ€§"
å»ºè®®ï¼š"å»ºè®®é‡‡ç”¨ä¸‰æ­¥æ•™å­¦æ³•ï¼š1)é€šè¿‡åŒç¼å®žéªŒè§†é¢‘å»ºç«‹ç›´è§‚è®¤çŸ¥ï¼›2)ç”¨å…‰ç”µæ•ˆåº”å®žéªŒç†è§£ç²’å­æ€§ï¼›3)é€šè¿‡è®¡ç®—é¢˜å·©å›ºç†è§£ã€‚é¢„è®¡éœ€è¦4è¯¾æ—¶ï¼Œå»ºè®®å‡†å¤‡å®žéªŒææ–™ã€‚"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}`);const s=o[t],l=G(n,"å¯¹è¯åŽ†å²",4),c={retail:`ç”Ÿæˆå»ºè®®çš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆé›¶å”®ä¼ä¸šä¸“ç”¨ï¼‰ï¼š
1. é”€å”®ç­–ç•¥ä¼˜åŒ–ï¼šåŸºäºŽé¡¾å®¢éœ€æ±‚ç‰¹å¾ï¼Œæä¾›ç²¾å‡†çš„äº§å“æŽ¨èå’Œé”€å”®ç­–ç•¥
2. åº“å­˜ä¸Žä¾›åº”é“¾ï¼šè€ƒè™‘å•†å“åº“å­˜ã€å­£èŠ‚æ€§å› ç´ å’Œä¾›åº”é“¾æ•ˆçŽ‡
3. å®¢æˆ·å…³ç³»ç®¡ç†ï¼šæä¾›å®¢æˆ·ç»´æŠ¤ã€å¤è´­ä¿ƒè¿›å’Œå£ç¢‘è¥é”€çš„å…·ä½“å»ºè®®
4. ä»·æ ¼ç­–ç•¥åˆ¶å®šï¼šå¹³è¡¡åˆ©æ¶¦ç©ºé—´å’Œå¸‚åœºç«žäº‰åŠ›ï¼Œæä¾›çµæ´»çš„å®šä»·å»ºè®®
5. æœåŠ¡ä½“éªŒæå‡ï¼šä¼˜åŒ–å”®å‰å’¨è¯¢ã€å”®ä¸­æœåŠ¡å’Œå”®åŽä¿éšœçš„å…¨æµç¨‹ä½“éªŒ
6. é›¶å”®è¿è¥å®žç”¨æ€§ï¼šç¡®ä¿å»ºè®®ç¬¦åˆé›¶å”®è¡Œä¸šç‰¹ç‚¹ï¼Œæ˜“äºŽé—¨åº—æ‰§è¡Œ
7. é›¶å”®åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†é¡¾å®¢çš„ä¸æ»¡è½¬åŒ–ä¸ºæœåŠ¡æ”¹è¿›å’Œäº§å“ä¼˜åŒ–çš„å…·ä½“è¡ŒåŠ¨æ–¹æ¡ˆ`,enterprise:`ç”Ÿæˆå»ºè®®çš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆä¼ä¸šæœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. å•†ä¸šä»·å€¼é‡åŒ–ï¼šæä¾›å¯è¡¡é‡çš„ROIã€æˆæœ¬èŠ‚çº¦å’Œæ•ˆçŽ‡æå‡æŒ‡æ ‡
2. æŠ€æœ¯å¯è¡Œæ€§è¯„ä¼°ï¼šå¹³è¡¡æŠ€æœ¯å…ˆè¿›æ€§å’Œå®žæ–½å¯è¡Œæ€§ï¼Œæä¾›é£Žé™©æŽ§åˆ¶å»ºè®®
3. ç»„ç»‡å˜é©ç®¡ç†ï¼šè€ƒè™‘äººå‘˜åŸ¹è®­ã€æµç¨‹è°ƒæ•´å’Œæ–‡åŒ–é€‚åº”çš„å˜é©å»ºè®®
4. åˆè§„ä¸Žå®‰å…¨ä¿éšœï¼šç¡®ä¿å»ºè®®ç¬¦åˆè¡Œä¸šè§„èŒƒå’Œä¼ä¸šå®‰å…¨æ”¿ç­–è¦æ±‚
5. åˆ†é˜¶æ®µå®žæ–½è§„åˆ’ï¼šæä¾›æ¸è¿›å¼å®žæ–½æ–¹æ¡ˆï¼Œé™ä½Žä¸šåŠ¡ä¸­æ–­é£Žé™©
6. ä¼ä¸šå†³ç­–æ”¯æŒï¼šä½¿ç”¨å†³ç­–å±‚å…³å¿ƒçš„å•†ä¸šè¯­è¨€ï¼Œçªå‡ºæˆ˜ç•¥ä»·å€¼
7. ä¼ä¸šåœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†éƒ¨é—¨å†²çªè½¬åŒ–ä¸ºæµç¨‹ä¼˜åŒ–å’Œåä½œæœºåˆ¶æ”¹è¿›å»ºè®®`,education:`ç”Ÿæˆå»ºè®®çš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆæ•™è‚²æœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. å­¦ä¹ æ•ˆæžœå¯¼å‘ï¼šåŸºäºŽå­¦ä¹ ç›®æ ‡å’Œå­¦ç”Ÿç‰¹ç‚¹ï¼Œæä¾›ä¸ªæ€§åŒ–çš„æ•™å­¦å»ºè®®
2. æ•™å­¦èµ„æºé…ç½®ï¼šåˆç†åˆ©ç”¨å¸ˆèµ„ã€æ•™æå’Œæ•™å­¦è®¾å¤‡ï¼Œä¼˜åŒ–èµ„æºé…ç½®
3. å­¦ä¹ è¿›åº¦ç®¡ç†ï¼šæä¾›å·®å¼‚åŒ–çš„å­¦ä¹ è¿›åº¦å®‰æŽ’å’Œèƒ½åŠ›æå‡è·¯å¾„
4. å®¶æ ¡åä½œä¿ƒè¿›ï¼šå»ºç«‹æœ‰æ•ˆçš„å®¶æ ¡æ²Ÿé€šæœºåˆ¶ï¼Œå½¢æˆæ•™è‚²åˆåŠ›
5. å­¦ä¹ å…´è¶£åŸ¹å…»ï¼šæ³¨é‡å­¦ä¹ åŠ¨æœºæ¿€å‘å’Œå…´è¶£ç»´æŒçš„æ–¹æ³•å»ºè®®
6. æ•™è‚²ä¸“ä¸šæ€§ä¿éšœï¼šç¡®ä¿å»ºè®®ç¬¦åˆæ•™è‚²è§„å¾‹å’Œå­¦ç”Ÿèº«å¿ƒå‘å±•ç‰¹ç‚¹
7. æ•™è‚²åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†å­¦ä¹ å›°éš¾è½¬åŒ–ä¸ºæ•™å­¦æ–¹æ³•è°ƒæ•´å’Œå­¦ä¹ æ”¯æŒä¼˜åŒ–å»ºè®®`},m=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

é‡è¦è¦æ±‚ï¼š
1) è¾“å‡ºç®€æ´å»ºè®®ï¼Œç›´è¾¾è¦ç‚¹ï¼›
2) é¿å…åˆ†ç‚¹ã€ç¼–å·ã€è¿‡å¤šé“ºåž«ï¼›
3) ä¿æŒå¯æ‰§è¡Œä¸Žè½åœ°æ€§ï¼›
4) è¯­å¥å®Œæ•´é€šé¡ºã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${l}

è¯·ç»™å‡ºç®€æ´çš„å»ºè®®ï¼Œçªå‡ºå¯æ‰§è¡Œè¦ç‚¹ã€‚`}];let p=await I(m,.3),x=q(p);if(x=Q(x),fe(x)){const w=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

é‡è¦è¦æ±‚ï¼š
1) ä»…è¾“å‡ºç®€æ´çš„æ ¸å¿ƒå»ºè®®ï¼Œç¦æ­¢å¯’æš„ã€é—®å€™ä¸Žå®¢å¥—ï¼›
2) ä¸åˆ†ç‚¹ï¼›
3) è¯­å¥å®Œæ•´é€šé¡ºã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${l}

è¯·ç›´æŽ¥ç»™å‡ºç®€æ´çš„æ ¸å¿ƒå»ºè®®ï¼Œç¦æ­¢å¯’æš„ä¸Žé“ºåž«ã€‚`}];p=await I(w,.1),x=Q(q(p))}ye(x)&&(x=we(x,{mode:"suggestion",scenario:t}));const i=xt(x.trim()),d=[{name:"å»ºè®®å†…å®¹",content:i}];return console.groupCollapsed("[LLM] Parsed -> generate_suggestion"),console.log("suggestionMessage:",L(i)),console.groupEnd(),{steps:d,suggestionMessage:i,structuredOutput:{suggestion:i}}}catch(o){throw console.error("ç”Ÿæˆä¼ä¸šå»ºè®®æ—¶å‡ºé”™:",o),o}},ft=async(r,t,n=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®é”€å”®ä¸“å®¶ï¼Œä¸“é—¨å¸®åŠ©ä¼ä¸šäº†è§£å®¢æˆ·éœ€æ±‚çš„å…³é”®ä¿¡æ¯ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«éœ€è¦è¿›ä¸€æ­¥äº†è§£çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å®¢æˆ·è¯´ï¼š"éœ€è¦å•†åŠ¡è¥¿è£…"
è¿½é—®ï¼š"è¯·é—®æ‚¨çš„å…·ä½“ä½¿ç”¨åœºåˆæ˜¯ä»€ä¹ˆï¼Ÿé¢„ç®—èŒƒå›´å¤§æ¦‚æ˜¯å¤šå°‘ï¼Ÿæ‚¨çš„èº«é«˜ä½“é‡æ˜¯å¤šå°‘ï¼Ÿå¯¹é¢œè‰²å’Œæ¬¾å¼æœ‰ä»€ä¹ˆåå¥½å—ï¼Ÿ"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šéœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æŠ€æœ¯å›¢é˜Ÿæ·±å…¥äº†è§£ä¸šåŠ¡éœ€æ±‚ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«æŠ€æœ¯å®žçŽ°éœ€è¦çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`ä¸šåŠ¡æ–¹è¯´ï¼š"éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ"
è¿½é—®ï¼š"å…·ä½“å¸Œæœ›æå‡å“ªäº›æ–¹é¢çš„ä½“éªŒï¼Ÿç›®æ ‡ç”¨æˆ·ç¾¤ä½“æ˜¯è°ï¼Ÿå½“å‰çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å…·ä½“çš„æ—¶é—´è¦æ±‚å—ï¼Ÿé¢„ç®—èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²éœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æ•™å¸ˆäº†è§£å­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«æ•™å­¦éœ€è¦çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å­¦ç”Ÿè¯´ï¼š"ä¸æ‡‚è¿™ä¸ªæ¦‚å¿µ"
è¿½é—®ï¼š"æ‚¨ä¹‹å‰å­¦è¿‡ç›¸å…³çš„åŸºç¡€çŸ¥è¯†å—ï¼Ÿæ‚¨æ›´å€¾å‘äºŽå“ªç§å­¦ä¹ æ–¹å¼ï¼Ÿæ‚¨å¸Œæœ›è¾¾åˆ°ä»€ä¹ˆæ ·çš„ç†è§£ç¨‹åº¦ï¼Ÿæœ‰ä»€ä¹ˆå…·ä½“çš„å­¦ä¹ ç›®æ ‡å—ï¼Ÿ"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}`);const s=o[t],l=G(n,"å¯¹è¯åŽ†å²",4),c={retail:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆé›¶å”®ä¼ä¸šä¸“ç”¨ï¼‰ï¼š
1. é”€å”®æœºä¼šæŒ–æŽ˜ï¼šè¯†åˆ«é¡¾å®¢æ½œåœ¨éœ€æ±‚ï¼Œç”Ÿæˆä¿ƒè¿›æˆäº¤çš„å…³é”®è¿½é—®
2. äº§å“åŒ¹é…ç²¾å‡†åº¦ï¼šé€šè¿‡è¿½é—®äº†è§£é¡¾å®¢å…·ä½“ä½¿ç”¨åœºæ™¯å’Œåå¥½
3. ä»·æ ¼æ•æ„Ÿåº¦æŽ¢æµ‹ï¼šå·§å¦™äº†è§£é¡¾å®¢é¢„ç®—èŒƒå›´å’Œä»·å€¼è®¤çŸ¥
4. ç«žå“å¯¹æ¯”åˆ†æžï¼šäº†è§£é¡¾å®¢å¯¹ç«žäº‰äº§å“çš„è®¤çŸ¥å’Œæ¯”è¾ƒæ ‡å‡†
5. è´­ä¹°å†³ç­–æµç¨‹ï¼šè¯†åˆ«å½±å“è´­ä¹°å†³ç­–çš„å…³é”®å› ç´ å’Œå†³ç­–äºº
6. é›¶å”®åœºæ™¯é€‚åº”æ€§ï¼šç¡®ä¿è¿½é—®æ–¹å¼ç¬¦åˆé›¶å”®çŽ¯å¢ƒçš„æ²Ÿé€šç‰¹ç‚¹
7. é›¶å”®åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†é¡¾å®¢çš„æŠ±æ€¨è½¬åŒ–ä¸ºäº†è§£çœŸå®žéœ€æ±‚çš„è¿½é—®æœºä¼š`,enterprise:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆä¼ä¸šæœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. ä¸šåŠ¡éœ€æ±‚æ·±åº¦æŒ–æŽ˜ï¼šé€šè¿‡è¿½é—®äº†è§£ä¼ä¸šçœŸå®žçš„ä¸šåŠ¡ç—›ç‚¹å’Œç›®æ ‡
2. å†³ç­–é“¾æ¡è¯†åˆ«ï¼šäº†è§£ä¼ä¸šå†…éƒ¨å†³ç­–æµç¨‹å’Œå…³é”®å†³ç­–äºº
3. é¢„ç®—ä¸Žæ—¶é—´çº¦æŸï¼šæŽ¢æ˜Žé¡¹ç›®é¢„ç®—èŒƒå›´å’Œå®žæ–½æ—¶é—´è¦æ±‚
4. æŠ€æœ¯çŽ¯å¢ƒè¯„ä¼°ï¼šäº†è§£ä¼ä¸šçŽ°æœ‰æŠ€æœ¯æž¶æž„å’Œé›†æˆè¦æ±‚
5. é£Žé™©æ‰¿å—èƒ½åŠ›ï¼šè¯„ä¼°ä¼ä¸šå¯¹æ–°æŠ€æœ¯å’Œå˜é©çš„æŽ¥å—ç¨‹åº¦
6. ä¼ä¸šçº§ä¸“ä¸šæ€§ï¼šä½¿ç”¨ä¼ä¸šå†³ç­–è€…ç†Ÿæ‚‰çš„å•†ä¸šè¯­è¨€è¿›è¡Œè¿½é—®
7. ä¼ä¸šåœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†å†…éƒ¨åˆ†æ­§è½¬åŒ–ä¸ºäº†è§£å„éƒ¨é—¨éœ€æ±‚çš„è¿½é—®ç­–ç•¥`,education:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆæ•™è‚²æœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. å­¦ä¹ ç›®æ ‡æ˜Žç¡®åŒ–ï¼šé€šè¿‡è¿½é—®äº†è§£å…·ä½“çš„å­¦ä¹ ç›®æ ‡å’ŒæœŸæœ›æˆæžœ
2. å­¦ä¹ èƒ½åŠ›è¯„ä¼°ï¼šäº†è§£å­¦ç”Ÿå½“å‰æ°´å¹³ã€å­¦ä¹ ä¹ æƒ¯å’Œèƒ½åŠ›ç‰¹ç‚¹
3. å­¦ä¹ çŽ¯å¢ƒåˆ†æžï¼šæŽ¢æ˜Žå®¶åº­å­¦ä¹ çŽ¯å¢ƒå’Œå­¦æ ¡æ•™å­¦æ¡ä»¶
4. å­¦ä¹ åŠ¨æœºæ¿€å‘ï¼šäº†è§£å­¦ç”Ÿå…´è¶£ç‚¹å’Œå­¦ä¹ åŠ¨åŠ›æ¥æº
5. å®¶é•¿æœŸæœ›ç®¡ç†ï¼šå¹³è¡¡å®¶é•¿æœŸæœ›å’Œå­¦ç”Ÿå®žé™…èƒ½åŠ›çš„å·®å¼‚
6. æ•™è‚²ä¸“ä¸šæ€§ä¿éšœï¼šç¡®ä¿è¿½é—®ç¬¦åˆæ•™è‚²è§„å¾‹å’Œå­¦ç”Ÿå¿ƒç†ç‰¹ç‚¹
7. æ•™è‚²åœºæ™¯ä¸å½“è¯­è¨€å¤„ç†ï¼šå°†å­¦ä¹ æŒ«æŠ˜è½¬åŒ–ä¸ºäº†è§£å­¦ä¹ éšœç¢çš„è¿½é—®æœºä¼š`},m=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

é‡è¦è¦æ±‚ï¼š
1) ç”Ÿæˆç®€æ´è‡ªç„¶çš„è¯¢é—®ï¼›
2) ç›´æŽ¥è¯¢é—®æœ€å…³é”®çš„ä¿¡æ¯ï¼›
3) è¯­å¥å…·ä½“æ˜Žç¡®ã€å®Œæ•´é€šé¡ºã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${l}

è¯·ç”Ÿæˆç®€æ´æ˜Žç¡®çš„è¯¢é—®ï¼Œæ·±å…¥äº†è§£å…³é”®ä¿¡æ¯ã€‚`}];let p=await I(m,.3),x=q(p);if(x=Q(x),fe(x)){const w=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

é‡è¦è¦æ±‚ï¼š
1) ä»…è¾“å‡ºç®€æ´çš„è‡ªç„¶è¯­å¥ï¼Œç¦æ­¢å¯’æš„ï¼›
2) è¯­å¥å®Œæ•´é€šé¡ºã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${l}

è¯·ç›´æŽ¥ç»™å‡ºç®€æ´çš„è‡ªç„¶è¯­å¥ï¼Œç¦æ­¢å¯’æš„ä¸Žé“ºåž«ã€‚`}];p=await I(w,.1),x=Q(q(p))}ye(x)&&(x=we(x,{mode:"followup",scenario:t}));const i=Oe(x.trim()),d=[{name:"è¿½é—®å†…å®¹",content:i}];return console.groupCollapsed("[LLM] Parsed -> generate_followup"),console.log("followUpMessage:",L(i)),console.groupEnd(),{steps:d,followUpMessage:i,structuredOutput:{followUp:i}}}catch(o){throw console.error("ç”Ÿæˆä¼ä¸šè¿½é—®æ—¶å‡ºé”™:",o),o}},yt=async(r,t,n,o=[])=>{try{const l={retail:{systemRole:"ä½ æ˜¯ä¸“ä¸šçš„é›¶å”®éœ€æ±‚åˆ†æžä¸“å®¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹ä»»ä½•äº§å“ç²¾å‡†è¯†åˆ«å…·ä½“çš„å…³é”®ä¿¡æ¯ç‚¹ã€‚",instruction:`åˆ†æžç”¨æˆ·éœ€æ±‚æ—¶ï¼Œè¦ç”Ÿæˆå…·ä½“çš„ã€å¯æ“ä½œçš„ä¿¡æ¯é€‰é¡¹ï¼Œè€Œä¸æ˜¯æŠ½è±¡æ¦‚å¿µã€‚

ä¾‹å¦‚ï¼š
- ç”¨æˆ·è¯´"æˆ‘è¦ä¹°ä»¶è¡£æœ" â†’ ç”Ÿæˆï¼šå°ºç ã€é¢œè‰²ã€ä»·ä½ã€åœºåˆã€æè´¨
- ç”¨æˆ·è¯´"æˆ‘è¦ä¹°ä¸ªæ‰‹æœº" â†’ ç”Ÿæˆï¼šé¢„ç®—ã€å“ç‰Œã€åŠŸèƒ½éœ€æ±‚ã€å­˜å‚¨å®¹é‡ã€é¢œè‰²
- ç”¨æˆ·è¯´"æˆ‘è¦è£…ä¿®" â†’ ç”Ÿæˆï¼šé¢ç§¯ã€é£Žæ ¼ã€é¢„ç®—ã€æ—¶é—´ã€æˆ¿é—´ç±»åž‹

è¦æ±‚ï¼š
1. æ¯ä¸ªé€‰é¡¹åç§°2-4ä¸ªå­—ï¼Œç®€æ´æ˜Žäº†
2. å¿…é¡»æ˜¯å…·ä½“çš„ã€å¯ç›´æŽ¥è¯¢é—®çš„ä¿¡æ¯ç‚¹
3. ä¸Žè¯¥äº§å“/æœåŠ¡ç›´æŽ¥ç›¸å…³ï¼Œä¸è¦æŠ½è±¡æ¦‚å¿µ
4. æŒ‰é‡è¦æ€§æŽ’åºï¼Œæœ€é‡è¦çš„æ”¾å‰é¢`},enterprise:{systemRole:"ä½ æ˜¯ä¸“ä¸šçš„ä¼ä¸šéœ€æ±‚åˆ†æžä¸“å®¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹ä»»ä½•ä¸šåŠ¡éœ€æ±‚ç²¾å‡†è¯†åˆ«å…·ä½“çš„å…³é”®ä¿¡æ¯ç‚¹ã€‚",instruction:`åˆ†æžä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œè¦ç”Ÿæˆå…·ä½“çš„ã€å¯æ“ä½œçš„ä¿¡æ¯é€‰é¡¹ï¼Œè€Œä¸æ˜¯æŠ½è±¡æ¦‚å¿µã€‚

ä¾‹å¦‚ï¼š
- ç”¨æˆ·è¯´"æˆ‘è¦å¼€å‘ç³»ç»Ÿ" â†’ ç”Ÿæˆï¼šé¢„ç®—è§„æ¨¡ã€å¼€å‘å‘¨æœŸã€ç”¨æˆ·æ•°é‡ã€æ ¸å¿ƒåŠŸèƒ½ã€æŠ€æœ¯æ ˆ
- ç”¨æˆ·è¯´"æˆ‘è¦åšè¥é”€" â†’ ç”Ÿæˆï¼šç›®æ ‡å®¢ç¾¤ã€æŽ¨å¹¿æ¸ é“ã€æ´»åŠ¨é¢„ç®—ã€æ•ˆæžœæœŸæœ›ã€æ—¶é—´å®‰æŽ’
- ç”¨æˆ·è¯´"æˆ‘è¦åŸ¹è®­å‘˜å·¥" â†’ ç”Ÿæˆï¼šåŸ¹è®­äººæ•°ã€åŸ¹è®­å†…å®¹ã€æ—¶é—´å®‰æŽ’ã€åŸ¹è®­æ–¹å¼ã€é¢„ç®—èŒƒå›´

è¦æ±‚ï¼š
1. æ¯ä¸ªé€‰é¡¹åç§°2-4ä¸ªå­—ï¼Œç®€æ´æ˜Žäº†
2. å¿…é¡»æ˜¯å…·ä½“çš„ã€å¯ç›´æŽ¥è¯¢é—®çš„ä¿¡æ¯ç‚¹
3. ä¸Žè¯¥ä¸šåŠ¡éœ€æ±‚ç›´æŽ¥ç›¸å…³ï¼Œä¸è¦æŠ½è±¡æ¦‚å¿µ
4. æŒ‰é‡è¦æ€§æŽ’åºï¼Œæœ€é‡è¦çš„æ”¾å‰é¢`},education:{systemRole:"ä½ æ˜¯ä¸“ä¸šçš„æ•™è‚²éœ€æ±‚åˆ†æžä¸“å®¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹ä»»ä½•å­¦ä¹ éœ€æ±‚ç²¾å‡†è¯†åˆ«å…·ä½“çš„å…³é”®ä¿¡æ¯ç‚¹ã€‚",instruction:`åˆ†æžå­¦ä¹ éœ€æ±‚æ—¶ï¼Œè¦ç”Ÿæˆå…·ä½“çš„ã€å¯æ“ä½œçš„ä¿¡æ¯é€‰é¡¹ï¼Œè€Œä¸æ˜¯æŠ½è±¡æ¦‚å¿µã€‚

ä¾‹å¦‚ï¼š
- ç”¨æˆ·è¯´"æˆ‘è¦å­¦è‹±è¯­" â†’ ç”Ÿæˆï¼šå½“å‰æ°´å¹³ã€å­¦ä¹ ç›®æ ‡ã€æ—¶é—´å®‰æŽ’ã€å­¦ä¹ æ–¹å¼ã€é¢„ç®—è€ƒè™‘
- ç”¨æˆ·è¯´"å­©å­è¦è¡¥æ•°å­¦" â†’ ç”Ÿæˆï¼šå¹´çº§é˜¶æ®µã€è–„å¼±çŽ¯èŠ‚ã€ä¸Šè¯¾æ—¶é—´ã€æœŸæœ›æ•ˆæžœã€è´¹ç”¨é¢„ç®—
- ç”¨æˆ·è¯´"æˆ‘è¦è€ƒè¯" â†’ ç”Ÿæˆï¼šè€ƒè¯•æ—¶é—´ã€åŸºç¡€æƒ…å†µã€å­¦ä¹ æ—¶é—´ã€åŸ¹è®­æ–¹å¼ã€é€šè¿‡ç›®æ ‡

è¦æ±‚ï¼š
1. æ¯ä¸ªé€‰é¡¹åç§°2-4ä¸ªå­—ï¼Œç®€æ´æ˜Žäº†
2. å¿…é¡»æ˜¯å…·ä½“çš„ã€å¯ç›´æŽ¥è¯¢é—®çš„ä¿¡æ¯ç‚¹
3. ä¸Žè¯¥å­¦ä¹ éœ€æ±‚ç›´æŽ¥ç›¸å…³ï¼Œä¸è¦æŠ½è±¡æ¦‚å¿µ
4. æŒ‰é‡è¦æ€§æŽ’åºï¼Œæœ€é‡è¦çš„æ”¾å‰é¢`}}[n];if(!l)throw new Error(`ä¸æ”¯æŒçš„åœºæ™¯ç±»åž‹: ${n}`);const c=G(o,"èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡",6),m=[{role:"system",content:`${l.systemRole}

${l.instruction}

ã€é‡è¦ã€‘è¾“å…¥å†…å®¹è¿‡æ»¤å’Œæ™ºèƒ½å¤„ç†è§„åˆ™ï¼š
1. ä¸å½“è¨€è¯­å¤„ç†ï¼šå¦‚æžœç”¨æˆ·è¾“å…¥åŒ…å«è¾±éª‚ã€ç²—ä¿—ã€æ”»å‡»æ€§è¯æ±‡ï¼Œä¸è¦é‡å¤è¿™äº›å†…å®¹ï¼Œè€Œæ˜¯ï¼š
   - è¯†åˆ«ä¸º"ç”¨æˆ·æƒ…ç»ªåŒ–è¡¨è¾¾"æˆ–"æµ‹è¯•æ€§è¾“å…¥"
   - ç†è§£å¯èƒ½çš„çœŸå®žæ„å›¾ï¼ˆå¦‚è¡¨è¾¾ä¸æ»¡ã€å¯»æ±‚å¸®åŠ©ã€éšæ„æµ‹è¯•ç­‰ï¼‰
   - ä»¥ä¸“ä¸šã€å‹å¥½çš„æ–¹å¼å›žåº”

2. æ— æ„ä¹‰è¾“å…¥å¤„ç†ï¼šå¦‚æžœè¾“å…¥æ˜¯ï¼š
   - éšæœºå­—æ¯/æ•°å­—ç»„åˆï¼ˆå¦‚"cnm"ã€"123"ã€"aaa"ï¼‰
   - å•ä¸ªè¯æ±‡æ²¡æœ‰æ˜Žç¡®éœ€æ±‚å«ä¹‰
   - æ˜Žæ˜¾çš„æµ‹è¯•æ€§è¾“å…¥
   è¯†åˆ«ä¸º"éœ€è¦å¼•å¯¼çš„ç”¨æˆ·"ï¼Œå»ºè®®æä¾›çœŸå®žéœ€æ±‚

3. è´Ÿé¢æƒ…ç»ªè¯†åˆ«ï¼šå¦‚æžœè¾“å…¥è¡¨è¾¾ä¸æ»¡æˆ–è´Ÿé¢æƒ…ç»ªï¼Œè½¬åŒ–ä¸ºäº†è§£é—®é¢˜å’Œæä¾›å¸®åŠ©çš„æœºä¼š

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š

ã€éœ€æ±‚ç†è§£ã€‘
ç®€æ˜Žæ‰¼è¦åœ°æ€»ç»“ç”¨æˆ·çš„æ ¸å¿ƒéœ€æ±‚ï¼ˆä¸è¶…è¿‡30å­—ï¼‰
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸æ€»ç»“
- å¯¹äºŽä¸å½“è¾“å…¥ï¼šè¯´æ˜Ž"ç”¨æˆ·æµ‹è¯•è¾“å…¥"æˆ–"ç”¨æˆ·æƒ…ç»ªåŒ–è¡¨è¾¾"
- å¯¹äºŽæ— æ„ä¹‰è¾“å…¥ï¼šè¯´æ˜Ž"è¾“å…¥å†…å®¹ä¸æ˜Žç¡®ï¼Œéœ€è¦å¼•å¯¼"

ã€ä¿¡æ¯é€‰é¡¹ã€‘
é’ˆå¯¹å…·ä½“éœ€æ±‚ç”Ÿæˆé€‰é¡¹ï¼Œæ ¼å¼ï¼šé€‰é¡¹åç§°|è¯¢é—®åŽŸå› 
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸ç”Ÿæˆ3-5ä¸ªé€‰é¡¹
- å¯¹äºŽæ— æ•ˆè¾“å…¥ï¼šè¿”å›ž"æ— éœ€æ”¶é›†é¢å¤–ä¿¡æ¯"

ã€éœ€æ±‚è½¬è¯‘ã€‘
è½¬åŒ–ä¸ºä¸“ä¸šæè¿°ï¼š
- å¯¹äºŽæœ‰æ•ˆéœ€æ±‚ï¼šæ­£å¸¸è½¬è¯‘
- å¯¹äºŽä¸å½“è¾“å…¥ï¼šè½¬è¯‘ä¸º"é¡¾å®¢å¯èƒ½æ­£åœ¨æµ‹è¯•ç³»ç»Ÿæˆ–è¡¨è¾¾æƒ…ç»ªï¼Œå»ºè®®å‹å¥½å¼•å¯¼å…¶æä¾›å…·ä½“éœ€æ±‚"
- å¯¹äºŽæ— æ„ä¹‰è¾“å…¥ï¼šè½¬è¯‘ä¸º"é¡¾å®¢è¾“å…¥ä¸å¤Ÿæ˜Žç¡®ï¼Œå»ºè®®ä¸»åŠ¨è¯¢é—®å¯ä»¥ä¸ºå…¶æä¾›ä»€ä¹ˆå¸®åŠ©"`},{role:"user",content:`ç”¨æˆ·è¾“å…¥ï¼š"${r}"${t?`
ï¼ˆç”¨æˆ·è¿˜ä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡ï¼‰`:""}${c}

è¯·åˆ†æžè¿™ä¸ªè¾“å…¥ï¼Œå¦‚æžœæ˜¯ä¸å½“è¨€è¯­æˆ–æ— æ„ä¹‰å†…å®¹ï¼Œè¯·è¿›è¡Œæ™ºèƒ½å¤„ç†ã€‚`}],p=await I(m,.1),x=be(p),i=x.match(/ã€éœ€æ±‚ç†è§£ã€‘\s*\n([\s\S]*?)(?=\nã€|$)/),d=x.match(/ã€ä¿¡æ¯é€‰é¡¹ã€‘\s*\n([\s\S]*?)(?=\nã€|$)/),w=x.match(/ã€éœ€æ±‚è½¬è¯‘ã€‘\s*\n([\s\S]*?)(?=\nã€|$)/),N=i?i[1].trim():"éœ€æ±‚åˆ†æž",j=d?d[1].trim():"",S=w?w[1].trim():r,_=[];if(j){const k=j.split(`
`).filter($=>$.trim());for(const $ of k){const D=$.match(/^[â€¢\-\*]?\s*([^|]{2,8})\|(.+)$/);D&&_.push({name:D[1].trim(),description:D[2].trim(),selected:!1})}}return console.log("[LLM] æ™ºèƒ½éœ€æ±‚åˆ†æžç»“æžœ:",{needsUnderstanding:N,missingInfoOptions:_,translation:S}),{needsUnderstanding:N,missingInfoOptions:_,translation:S,structuredOutput:{needsUnderstanding:N,missingInfoOptions:_,translation:S}}}catch(s){throw console.error("æ™ºèƒ½éœ€æ±‚åˆ†æžé”™è¯¯:",s),s}},wt=async(r,t,n=[])=>{try{console.log(`
=== å¼€å§‹åå•†å»ºè®®å¤„ç† ===`),console.log("åŽŸå§‹å»ºè®®:",r.originalSuggestion),console.log("åå•†è¯·æ±‚:",r.negotiationRequest),console.log("åœºæ™¯:",t);const o=G(n,"åå•†ä¸Šä¸‹æ–‡",4),s=`ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„${t}é¡¾é—®ï¼Œæ­£åœ¨æ ¹æ®å®¢æˆ·çš„åå•†è¯·æ±‚ä¼˜åŒ–ä¹‹å‰çš„å»ºè®®ã€‚

è¯·æ ¹æ®å®¢æˆ·çš„åå•†è¦æ±‚ï¼Œå¯¹åŽŸå§‹å»ºè®®è¿›è¡Œä¿®æ”¹å’Œä¼˜åŒ–ã€‚

è¾“å‡ºè¦æ±‚ï¼š
1. å¿…é¡»åŒ…å«ã€å¤„ç†æ­¥éª¤ã€‘éƒ¨åˆ†ï¼Œè¯¦ç»†è¯´æ˜Žåå•†å¤„ç†è¿‡ç¨‹
2. å¿…é¡»åŒ…å«ã€ä¼˜åŒ–å»ºè®®ã€‘éƒ¨åˆ†ï¼Œæä¾›ä¿®æ”¹åŽçš„å®Œæ•´å»ºè®®
3. å»ºè®®è¦å…·ä½“ã€å¯æ“ä½œã€ç¬¦åˆå®¢æˆ·çš„åå•†è¦æ±‚
4. ä¿æŒä¸“ä¸šæ€§å’Œå®žç”¨æ€§ï¼Œè¯­å¥ç®€æ´ã€‚`,l=`åŽŸå§‹å»ºè®®ï¼š
${r.originalSuggestion}

å®¢æˆ·åå•†è¯·æ±‚ï¼š
${r.negotiationRequest}

è¯·æ ¹æ®å®¢æˆ·çš„åå•†è¦æ±‚ï¼Œä¼˜åŒ–ä¸Šè¿°å»ºè®®ã€‚${o}`,c=[{role:"system",content:s},{role:"user",content:l}];console.log("å‘é€åå•†è¯·æ±‚åˆ°LLM...");const m=await I(c,.7);console.log("LLMåå•†å“åº”:",L(m));const p=q(m),x=je(p),i=x.å¤„ç†æ­¥éª¤||["æ­£åœ¨åˆ†æžåå•†è¯·æ±‚...","ä¼˜åŒ–åŽŸå§‹å»ºè®®...","ç”Ÿæˆåå•†åŽå»ºè®®..."],d=x.ä¼˜åŒ–å»ºè®®||p;return console.log("åå•†å¤„ç†å®Œæˆ"),console.log("å¤„ç†æ­¥éª¤:",i),console.log("ä¼˜åŒ–å»ºè®®:",L(d)),{steps:i,suggestionMessage:d}}catch(o){throw console.error("åå•†å»ºè®®å¤„ç†é”™è¯¯:",o),o}},jt=async(r,t,n,o=[])=>{try{const s={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®é”€å”®ä¸“å®¶ï¼Œä¸“é—¨å¸®åŠ©ä¼ä¸šäº†è§£å®¢æˆ·éœ€æ±‚çš„å…³é”®ä¿¡æ¯ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå®¢æˆ·çš„åŽŸå§‹éœ€æ±‚å’Œä¼ä¸šæ™ºèƒ½åˆ†æžè¯†åˆ«å‡ºçš„å…³é”®ä¿¡æ¯ç‚¹ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å®¢æˆ·è¯´ï¼š"éœ€è¦å•†åŠ¡è¥¿è£…"ï¼Œä¼ä¸šå…³æ³¨ï¼šå°ºç ã€é¢œè‰²ã€é¢„ç®—
è¿½é—®ï¼š"ä¸ºäº†ç»™æ‚¨æŽ¨èæœ€åˆé€‚çš„å•†åŠ¡è¥¿è£…ï¼Œè¯·å‘ŠçŸ¥æ‚¨çš„å°ºç ã€åå¥½çš„é¢œè‰²å’Œå¤§æ¦‚çš„é¢„ç®—èŒƒå›´ï¼Ÿ"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šéœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æŠ€æœ¯å›¢é˜Ÿæ·±å…¥äº†è§£ä¸šåŠ¡éœ€æ±‚ï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽä¸šåŠ¡éœ€æ±‚å’Œä¼ä¸šæ™ºèƒ½åˆ†æžè¯†åˆ«å‡ºçš„å…³é”®ä¿¡æ¯ç‚¹ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`ä¸šåŠ¡æ–¹è¯´ï¼š"éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ"ï¼Œä¼ä¸šå…³æ³¨ï¼šç›®æ ‡ç”¨æˆ·ã€å…·ä½“åŠŸèƒ½ã€æ—¶é—´è¦æ±‚
è¿½é—®ï¼š"ä¸ºäº†åˆ¶å®šæœ€é€‚åˆçš„æ–¹æ¡ˆï¼Œè¯·æ˜Žç¡®ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ã€å¸Œæœ›æå‡çš„å…·ä½“åŠŸèƒ½å’Œé¢„æœŸå®Œæˆæ—¶é—´ï¼Ÿ"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²éœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æ•™å¸ˆäº†è§£å­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µï¼ŒåŒæ—¶æ™ºèƒ½è¿‡æ»¤å’Œè½¬åŒ–ä¸å½“è¡¨è¾¾ï¼Œç¡®ä¿æ²Ÿé€šä¸“ä¸šåŒ–ã€‚",context:"åŸºäºŽå­¦ä¹ éœ€æ±‚å’Œä¼ä¸šæ™ºèƒ½åˆ†æžè¯†åˆ«å‡ºçš„å…³é”®ä¿¡æ¯ç‚¹ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å­¦ç”Ÿè¯´ï¼š"ä¸æ‡‚æ•°å­¦æ¦‚å¿µ"ï¼Œä¼ä¸šå…³æ³¨ï¼šå¹´çº§ã€å…·ä½“ç« èŠ‚ã€å­¦ä¹ æ–¹å¼
è¿½é—®ï¼š"ä¸ºäº†åˆ¶å®šä¸ªæ€§åŒ–çš„è¾…å¯¼è®¡åˆ’ï¼Œè¯·å‘ŠçŸ¥æ‚¨çš„å¹´çº§ã€å…·ä½“ä¸æ‡‚çš„ç« èŠ‚å’Œæ‚¨æ›´å–œæ¬¢çš„å­¦ä¹ æ–¹å¼ï¼Ÿ"`}};if(!n||!s[n])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${n}`);const l=s[n],c=G(o,"èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡",6),m={retail:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆé›¶å”®ä¼ä¸šä¸“ç”¨ï¼‰ï¼š
1. é”€å”®æœºä¼šæŒ–æŽ˜ï¼šè¯†åˆ«é¡¾å®¢æ½œåœ¨éœ€æ±‚ï¼Œç”Ÿæˆä¿ƒè¿›æˆäº¤çš„å…³é”®è¿½é—®
2. äº§å“åŒ¹é…ç²¾å‡†åº¦ï¼šé€šè¿‡è¿½é—®äº†è§£é¡¾å®¢å…·ä½“ä½¿ç”¨åœºæ™¯å’Œåå¥½
3. ä»·æ ¼æ•æ„Ÿåº¦æŽ¢æµ‹ï¼šå·§å¦™äº†è§£é¡¾å®¢é¢„ç®—èŒƒå›´å’Œä»·å€¼è®¤çŸ¥
4. ç«žå“å¯¹æ¯”åˆ†æžï¼šäº†è§£é¡¾å®¢å¯¹ç«žäº‰äº§å“çš„è®¤çŸ¥å’Œæ¯”è¾ƒæ ‡å‡†
5. è´­ä¹°å†³ç­–æµç¨‹ï¼šè¯†åˆ«å½±å“è´­ä¹°å†³ç­–çš„å…³é”®å› ç´ å’Œå†³ç­–äºº
6. é›¶å”®åœºæ™¯é€‚åº”æ€§ï¼šç¡®ä¿è¿½é—®æ–¹å¼ç¬¦åˆé›¶å”®çŽ¯å¢ƒçš„æ²Ÿé€šç‰¹ç‚¹
7. æ™ºèƒ½ä¿¡æ¯æ•´åˆï¼šå°†AIåˆ†æžè¯†åˆ«çš„å…³é”®ä¿¡æ¯ç‚¹è‡ªç„¶èžå…¥è¿½é—®ä¸­`,enterprise:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆä¼ä¸šæœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. ä¸šåŠ¡éœ€æ±‚æ·±åº¦æŒ–æŽ˜ï¼šé€šè¿‡è¿½é—®äº†è§£ä¼ä¸šçœŸå®žçš„ä¸šåŠ¡ç—›ç‚¹å’Œç›®æ ‡
2. å†³ç­–é“¾æ¡è¯†åˆ«ï¼šäº†è§£ä¼ä¸šå†…éƒ¨å†³ç­–æµç¨‹å’Œå…³é”®å†³ç­–äºº
3. é¢„ç®—ä¸Žæ—¶é—´çº¦æŸï¼šæŽ¢æ˜Žé¡¹ç›®é¢„ç®—èŒƒå›´å’Œå®žæ–½æ—¶é—´è¦æ±‚
4. æŠ€æœ¯çŽ¯å¢ƒè¯„ä¼°ï¼šäº†è§£ä¼ä¸šçŽ°æœ‰æŠ€æœ¯æž¶æž„å’Œé›†æˆè¦æ±‚
5. é£Žé™©æ‰¿å—èƒ½åŠ›ï¼šè¯„ä¼°ä¼ä¸šå¯¹æ–°æŠ€æœ¯å’Œå˜é©çš„æŽ¥å—ç¨‹åº¦
6. ä¼ä¸šçº§ä¸“ä¸šæ€§ï¼šä½¿ç”¨ä¼ä¸šå†³ç­–è€…ç†Ÿæ‚‰çš„å•†ä¸šè¯­è¨€è¿›è¡Œè¿½é—®
7. æ™ºèƒ½ä¿¡æ¯æ•´åˆï¼šå°†AIåˆ†æžè¯†åˆ«çš„å…³é”®ä¿¡æ¯ç‚¹è‡ªç„¶èžå…¥è¿½é—®ä¸­`,education:`è¿½é—®ç”Ÿæˆçš„æŒ‡å¯¼åŽŸåˆ™ï¼ˆæ•™è‚²æœåŠ¡ä¸“ç”¨ï¼‰ï¼š
1. å­¦ä¹ ç›®æ ‡æ˜Žç¡®åŒ–ï¼šé€šè¿‡è¿½é—®äº†è§£å…·ä½“çš„å­¦ä¹ ç›®æ ‡å’ŒæœŸæœ›æˆæžœ
2. å­¦ä¹ èƒ½åŠ›è¯„ä¼°ï¼šäº†è§£å­¦ç”Ÿå½“å‰æ°´å¹³ã€å­¦ä¹ ä¹ æƒ¯å’Œèƒ½åŠ›ç‰¹ç‚¹
3. å­¦ä¹ çŽ¯å¢ƒåˆ†æžï¼šæŽ¢æ˜Žå®¶åº­å­¦ä¹ çŽ¯å¢ƒå’Œå­¦æ ¡æ•™å­¦æ¡ä»¶
4. å­¦ä¹ åŠ¨æœºæ¿€å‘ï¼šäº†è§£å­¦ç”Ÿå…´è¶£ç‚¹å’Œå­¦ä¹ åŠ¨åŠ›æ¥æº
5. å®¶é•¿æœŸæœ›ç®¡ç†ï¼šå¹³è¡¡å®¶é•¿æœŸæœ›å’Œå­¦ç”Ÿå®žé™…èƒ½åŠ›çš„å·®å¼‚
6. æ•™è‚²ä¸“ä¸šæ€§ä¿éšœï¼šç¡®ä¿è¿½é—®ç¬¦åˆæ•™è‚²è§„å¾‹å’Œå­¦ç”Ÿå¿ƒç†ç‰¹ç‚¹
7. æ™ºèƒ½ä¿¡æ¯æ•´åˆï¼šå°†AIåˆ†æžè¯†åˆ«çš„å…³é”®ä¿¡æ¯ç‚¹è‡ªç„¶èžå…¥è¿½é—®ä¸­`},p=t.map(N=>`${N.name}ï¼š${N.description}`).join(`
`),x=[{role:"system",content:`${l.systemRole}

${l.context}

${l.example}

${m[n]}

é‡è¦è¦æ±‚ï¼š
1) ç”Ÿæˆç®€æ´è‡ªç„¶çš„è¯¢é—®è¯­å¥ï¼›
2) å°†æ‰€æœ‰é€‰ä¸­çš„ä¿¡æ¯ç‚¹è‡ªç„¶èžåˆæˆä¸€ä¸ªè¯­å¥ï¼›
3) ç¡®ä¿å†…å®¹å…·ä½“æ˜Žç¡®ä¸”è¯­å¥å®Œæ•´ã€‚`},{role:"user",content:`åŽŸå§‹éœ€æ±‚ï¼š"${r}"

ä¼ä¸šé€‰ä¸­çš„ä¿¡æ¯ç‚¹ï¼š
${p}

${c}

è¯·åŸºäºŽä»¥ä¸Šé€‰ä¸­çš„ä¿¡æ¯ç‚¹ç”Ÿæˆç®€æ´æ˜Žç¡®çš„è¯¢é—®è¯­å¥ï¼Œè‡ªç„¶èžåˆæ‰€æœ‰ä¿¡æ¯ç‚¹ã€‚`}];let i=await I(x,.3),d=q(i);if(d=Q(d),fe(d)){const N=[{role:"system",content:`${l.systemRole}

${l.context}

${l.example}

é‡è¦è¦æ±‚ï¼š
1) ä»…è¾“å‡ºç®€æ´çš„è‡ªç„¶è¯­å¥ï¼Œç¦æ­¢å¯’æš„ã€é—®å€™ä¸Žå®¢å¥—ï¼›
2) å¿…é¡»åŒ…å«æ‰€æœ‰é€‰ä¸­çš„ä¿¡æ¯ç‚¹ï¼›
3) è¯­å¥å®Œæ•´é€šé¡ºã€‚`},{role:"user",content:`åŽŸå§‹éœ€æ±‚ï¼š"${r}"

é€‰ä¸­çš„ä¿¡æ¯ç‚¹ï¼š
${p}

è¯·ç›´æŽ¥ç»™å‡ºç®€æ´çš„èžåˆæ‰€æœ‰ä¿¡æ¯ç‚¹çš„è¯¢é—®è¯­å¥ï¼Œç¦æ­¢å¯’æš„ä¸Žé“ºåž«ã€‚${c}`}];i=await I(N,.1),d=Q(q(i))}ye(d)&&(d=we(d,{mode:"followup",scenario:n}));const w=Oe(d.trim());return console.groupCollapsed("[LLM] Parsed -> generate_questions_by_selected_info"),console.log("followUpMessage:",L(w)),console.groupEnd(),w}catch(s){throw console.error("ç”Ÿæˆè¿½é—®é”™è¯¯:",s),s}},kt=async(r,t,n=[])=>{try{console.log(`
=== å¼€å§‹åå•†è¿½é—®å¤„ç† ===`),console.log("åŽŸå§‹è¿½é—®:",r.originalFollowUp),console.log("åå•†è¯·æ±‚:",r.negotiationRequest),console.log("åœºæ™¯:",t);const o=G(n,"åå•†ä¸Šä¸‹æ–‡",4),s=`ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„${t}é¡¾é—®ï¼Œæ­£åœ¨æ ¹æ®å®¢æˆ·çš„åå•†è¯·æ±‚ä¼˜åŒ–ä¹‹å‰çš„è¿½é—®ã€‚

è¯·æ ¹æ®å®¢æˆ·çš„åå•†è¦æ±‚ï¼Œå¯¹åŽŸå§‹è¿½é—®è¿›è¡Œä¿®æ”¹å’Œä¼˜åŒ–ã€‚

è¾“å‡ºè¦æ±‚ï¼š
1. å¿…é¡»åŒ…å«ã€å¤„ç†æ­¥éª¤ã€‘éƒ¨åˆ†ï¼Œè¯¦ç»†è¯´æ˜Žåå•†å¤„ç†è¿‡ç¨‹
2. å¿…é¡»åŒ…å«ã€ä¼˜åŒ–è¿½é—®ã€‘éƒ¨åˆ†ï¼Œæä¾›ä¿®æ”¹åŽçš„å®Œæ•´è¿½é—®
3. è¿½é—®è¦å…·ä½“ã€å¯æ“ä½œã€ç¬¦åˆå®¢æˆ·çš„åå•†è¦æ±‚
4. ä¿æŒä¸“ä¸šæ€§å’Œå®žç”¨æ€§ï¼Œè¯­å¥ç®€æ´ã€‚`,l=`åŽŸå§‹è¿½é—®ï¼š
${r.originalFollowUp}

å®¢æˆ·åå•†è¯·æ±‚ï¼š
${r.negotiationRequest}

è¯·æ ¹æ®å®¢æˆ·çš„åå•†è¦æ±‚ï¼Œä¼˜åŒ–ä¸Šè¿°è¿½é—®ã€‚${o}`,c=[{role:"system",content:s},{role:"user",content:l}];console.log("å‘é€åå•†è¿½é—®è¯·æ±‚åˆ°LLM...");const m=await I(c,.7);console.log("LLMåå•†è¿½é—®å“åº”:",L(m));const p=q(m),x=je(p),i=x.å¤„ç†æ­¥éª¤||["æ­£åœ¨åˆ†æžåå•†è¯·æ±‚...","ä¼˜åŒ–åŽŸå§‹è¿½é—®...","ç”Ÿæˆåå•†åŽè¿½é—®..."],d=x.ä¼˜åŒ–è¿½é—®||p;return console.log("åå•†è¿½é—®å¤„ç†å®Œæˆ"),console.log("å¤„ç†æ­¥éª¤:",i),console.log("ä¼˜åŒ–è¿½é—®:",L(d)),{steps:i,followUpMessage:d}}catch(o){throw console.error("åå•†è¿½é—®å¤„ç†é”™è¯¯:",o),o}},z=async({type:r,content:t,image:n,context:o,scenario:s,chatHistory:l=[]})=>{try{if(r==="problem_input")return await gt(t,n,s,l);if(r==="analyze_needs_with_missing_info")return await yt(t,n,s,l);if(r==="generate_questions_by_selected_info"){const{originalContent:c,selectedInfoItems:m}=t;return await jt(c,m,s,l)}else{if(r==="solution_response")return await ht(t,s,l);if(r==="generate_suggestion")return await bt(t,s,l);if(r==="generate_followup")return await ft(t,s,l);if(r==="negotiate_suggestion")return await wt(t,s,l);if(r==="negotiate_followup")return await kt(t,s,l)}throw new Error("æœªçŸ¥çš„å¤„ç†ç±»åž‹")}catch(c){throw console.error("LLMå¤„ç†é”™è¯¯:",c),c}},Nt=r=>{const[t,n]=h.useState({problem:[],llm:[],solution:[]}),[o,s]=h.useState(!1),[l,c]=h.useState(!1),[m,p]=h.useState(!1),[x,i]=h.useState(null),[d,w]=h.useState([]),[N,j]=h.useState(!1),[S,_]=h.useState(null),k=h.useCallback((f,b)=>{n(u=>({...u,[f]:[...u[f],b]}))},[]);h.useCallback(()=>{n({problem:[],llm:[],solution:[]}),p(!1),i(null)},[]);const $=h.useCallback(async f=>{const b={type:"user",text:f.text,image:f.image,timestamp:f.timestamp};k("problem",b),s(!0);try{const u=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"})),b].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),y=await z({type:"analyze_needs_with_missing_info",content:f.text,image:f.image,context:"problem_to_solution",scenario:r,chatHistory:u});_({originalContent:f.text,image:f.image,chatHistory:u}),w(y.missingInfoOptions||[]);const C={type:"processing",title:"æ™ºèƒ½éœ€æ±‚åˆ†æž",steps:[{name:"éœ€æ±‚ç†è§£",content:y.needsUnderstanding},{name:"éœ€æ±‚è½¬è¯‘",content:y.translation},{name:"ç¼ºå¤±ä¿¡æ¯åˆ†æž",content:y.missingInfoOptions&&y.missingInfoOptions.length>0?`è¯†åˆ«åˆ° ${y.missingInfoOptions.length} ä¸ªå¯äº†è§£çš„ä¿¡æ¯ç‚¹ï¼Œç­‰å¾…ä¼ä¸šæ–¹é€‰æ‹©`:"éœ€æ±‚ä¿¡æ¯è¾ƒä¸ºå®Œæ•´ï¼Œæ— éœ€é¢å¤–äº†è§£ä¿¡æ¯"}],output:y.translation,timestamp:new Date().toISOString()};k("llm",C);const M={type:"llm_request",text:y.translation,timestamp:new Date().toISOString(),needsAnalysis:y.needsUnderstanding,missingInfoOptions:y.missingInfoOptions||[]};k("solution",M),y.missingInfoOptions&&y.missingInfoOptions.length>0&&j(!0)}catch(u){console.error("LLMå¤„ç†é”™è¯¯:",u);const y={type:"processing",title:"å¤„ç†å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",y)}finally{s(!1)}},[k,r,t.problem,t.solution]),D=h.useCallback(async f=>{const b={type:"user",text:f.text,timestamp:f.timestamp};k("solution",b),N&&(j(!1),w([]),_(null)),s(!0);try{const u=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"})),b].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),y=await z({type:"solution_response",content:f.text,context:"solution_to_problem",scenario:r,chatHistory:u}),C={type:"processing",title:"å¤„ç†æ–¹æ¡ˆç«¯å“åº”",steps:y.steps,output:y.optimizedMessage,timestamp:new Date().toISOString()};k("llm",C);const M={type:"ai_response",text:y.optimizedMessage,timestamp:new Date().toISOString()};k("problem",M)}catch(u){console.error("LLMå¤„ç†é”™è¯¯:",u);const y={type:"processing",title:"å¤„ç†å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",y)}finally{s(!1)}},[k,r,t.problem,t.solution]),B=h.useCallback(async()=>{if(!l){c(!0);try{const b=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").slice(-2),...t.solution.filter(a=>a.type==="user"||a.type==="ai_response").slice(-2)].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)).map(a=>a.text).join(`
`),u=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"}))].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),y=await z({type:"generate_suggestion",content:b,scenario:r,chatHistory:u}),C={type:"processing",title:"ç”Ÿæˆä¼ä¸šç«¯å»ºè®®",steps:y.steps,output:y.suggestionMessage,timestamp:new Date().toISOString()};k("llm",C);const M={type:"suggestion",text:y.suggestionMessage,timestamp:new Date().toISOString(),id:`suggestion_${Date.now()}`,feedbackGiven:!1};k("solution",M),p(!0),i(y.suggestionMessage)}catch(f){console.error("ç”Ÿæˆå»ºè®®é”™è¯¯:",f);const b={type:"processing",title:"ç”Ÿæˆå»ºè®®å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œç”Ÿæˆå»ºè®®æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",b)}finally{c(!1)}}},[k,r,t.problem,t.solution,l]),A=h.useCallback(async()=>{if(!l){c(!0);try{const b=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").slice(-2),...t.solution.filter(a=>a.type==="user"||a.type==="ai_response").slice(-2)].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)).map(a=>a.text).join(`
`),u=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"}))].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),y=await z({type:"generate_followup",content:b,scenario:r,chatHistory:u}),C={type:"processing",title:"ç”Ÿæˆä¼ä¸šç«¯è¿½é—®",steps:y.steps,output:y.followUpMessage,timestamp:new Date().toISOString()};k("llm",C);const M={type:"followup",text:y.followUpMessage,timestamp:new Date().toISOString(),id:`followup_${Date.now()}`,feedbackGiven:!1};k("solution",M),p(!0),i(y.followUpMessage)}catch(f){console.error("ç”Ÿæˆè¿½é—®é”™è¯¯:",f);const b={type:"processing",title:"ç”Ÿæˆè¿½é—®å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œç”Ÿæˆè¿½é—®æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",b)}finally{c(!1)}}},[k,r,t.problem,t.solution,l]),K=h.useCallback(async f=>{if(o)return;const b={type:"user",text:f,timestamp:new Date().toISOString()};k("solution",b),s(!0);try{const u=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"})),b].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),y=await z({type:"solution_response",content:f,context:"solution_to_problem",scenario:r,chatHistory:u}),C={type:"processing",title:"å¤„ç†æœ€ç»ˆå“åº”",steps:y.steps,output:y.optimizedMessage,timestamp:new Date().toISOString()};k("llm",C);const M={type:"ai_response",text:y.optimizedMessage,timestamp:new Date().toISOString()};k("problem",M),p(!1),i(null)}catch(u){console.error("ç¡®è®¤å‘é€é”™è¯¯:",u);const y={type:"processing",title:"å¤„ç†æœ€ç»ˆå“åº”å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†æœ€ç»ˆå“åº”æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",y)}finally{s(!1)}},[k,r,t.problem,t.solution,o]),Y=h.useCallback(()=>{p(!1),i(null)},[]),ee=h.useCallback(f=>{w(b=>b.map((u,y)=>y===f?{...u,selected:!u.selected}:u))},[]),te=h.useCallback(async()=>{if(!S||l)return;const f=d.filter(b=>b.selected);if(f.length!==0){c(!0);try{const b=await z({type:"generate_questions_by_selected_info",content:{originalContent:S.originalContent,selectedInfoItems:f},scenario:r,chatHistory:S.chatHistory}),u={type:"processing",title:"ç”Ÿæˆæ™ºèƒ½è¿½é—®",steps:[{name:"é€‰ä¸­ä¿¡æ¯",content:f.map(y=>`${y.name}ï¼š${y.description}`).join(`
`)},{name:"ç”Ÿæˆè¿½é—®",content:b}],output:b,timestamp:new Date().toISOString()};k("llm",u),p(!0),i(b),j(!1)}catch(b){console.error("ç”Ÿæˆè¿½é—®é”™è¯¯:",b);const u={type:"processing",title:"ç”Ÿæˆè¿½é—®å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œç”Ÿæˆè¿½é—®æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};k("llm",u)}finally{c(!1)}}},[S,d,r,l,k]),P=h.useCallback(()=>{j(!1),w([]),_(null)},[]),F=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,feedbackGiven:!0,accepted:!0}:u)}))},[]),Z=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,negotiating:!0}:u)}))},[]),O=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,negotiating:!1}:u)}))},[]),V=h.useCallback(async(f,b)=>{if(b.trim())try{const u=t.solution.find(a=>a.id===f);if(!u)return;const y=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"}))].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),C=await z({type:"negotiate_suggestion",content:{originalSuggestion:u.text,negotiationRequest:b},scenario:r,chatHistory:y}),M={type:"processing",title:"åå•†ä¿®æ”¹å»ºè®®",steps:C.steps,output:C.suggestionMessage,timestamp:new Date().toISOString()};k("llm",M),n(a=>({...a,solution:a.solution.map(v=>v.id===f?{...v,text:C.suggestionMessage,negotiating:!1,negotiated:!0,originalText:u.text,negotiationRequest:b}:v)}))}catch(u){console.error("åå•†å»ºè®®é”™è¯¯:",u),O(f)}},[t.problem,t.solution,r,k,O]),J=h.useCallback(async f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,feedbackGiven:!0,accepted:!1}:u)})),await B()},[B]),se=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,feedbackGiven:!0,accepted:!0}:u)}))},[]),re=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,negotiating:!0}:u)}))},[]),H=h.useCallback(f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,negotiating:!1}:u)}))},[]),g=h.useCallback(async(f,b)=>{if(b.trim())try{const u=t.solution.find(a=>a.id===f);if(!u)return;const y=[...t.problem.filter(a=>a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"problem"})),...t.solution.filter(a=>a.type==="llm_request"||a.type==="user"||a.type==="ai_response").map(a=>({...a,panel:"solution"}))].sort((a,v)=>new Date(a.timestamp)-new Date(v.timestamp)),C=await z({type:"negotiate_followup",content:{originalFollowUp:u.text,negotiationRequest:b},scenario:r,chatHistory:y}),M={type:"processing",title:"åå•†ä¿®æ”¹è¿½é—®",steps:C.steps,output:C.followUpMessage,timestamp:new Date().toISOString()};k("llm",M),n(a=>({...a,solution:a.solution.map(v=>v.id===f?{...v,text:C.followUpMessage,negotiating:!1,negotiated:!0,originalText:u.text,negotiationRequest:b}:v)}))}catch(u){console.error("åå•†è¿½é—®é”™è¯¯:",u),H(f)}},[t.problem,t.solution,r,k,H]),T=h.useCallback(async f=>{n(b=>({...b,solution:b.solution.map(u=>u.id===f?{...u,feedbackGiven:!0,accepted:!1}:u)})),await A()},[A]),U=h.useCallback(()=>{n({problem:[],llm:[],solution:[]}),p(!1),i(null),w([]),j(!1),_(null)},[]);return{messages:t,llmProcessing:o,iterationProcessing:l,iterationMode:m,pendingResponse:x,missingInfoOptions:d,showMissingInfoPanel:N,currentNeedsAnalysis:S,toggleMissingInfoOption:ee,generateFollowUpBySelectedInfo:te,skipInfoCollection:P,acceptSuggestion:F,negotiateSuggestion:Z,cancelNegotiation:O,sendNegotiationRequest:V,rejectSuggestion:J,acceptFollowUp:se,negotiateFollowUp:re,cancelFollowUpNegotiation:H,sendFollowUpNegotiationRequest:g,rejectFollowUp:T,sendProblemMessage:$,sendSolutionMessage:D,generateSuggestion:B,generateFollowUp:A,confirmSendResponse:K,cancelIteration:Y,clearMessages:U}};class vt{constructor(){this.listeners={},this.connected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=2e3,this.connectionId=null,this.EVENT_TYPES={MESSAGE_RECEIVED:"message_received",MESSAGE_SENT:"message_sent",CONNECTION_STATE_CHANGED:"connection_state_changed",PROCESSING_STARTED:"processing_started",PROCESSING_COMPLETED:"processing_completed",PROCESSING_STEP_UPDATED:"processing_step_updated",ERROR:"error"}}connect(){return this.connected?Promise.resolve(this.connectionId):new Promise((t,n)=>{setTimeout(()=>{this.connected=!0,this.connectionId=`conn_${Date.now()}`,this.reconnectAttempts=0,this._triggerEvent(this.EVENT_TYPES.CONNECTION_STATE_CHANGED,{connected:!0,connectionId:this.connectionId}),console.log(`[RealtimeService] Connected with ID: ${this.connectionId}`),t(this.connectionId),this._setupHeartbeat()},500)})}disconnect(){return this.connected?new Promise(t=>{setTimeout(()=>{this.connected=!1,this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this._triggerEvent(this.EVENT_TYPES.CONNECTION_STATE_CHANGED,{connected:!1,connectionId:this.connectionId}),console.log("[RealtimeService] Disconnected"),this.connectionId=null,t()},300)}):Promise.resolve()}sendMessage(t,n){return this.connected?new Promise((o,s)=>{setTimeout(()=>{const l={...t,id:t.id||`msg_${Date.now()}`,timestamp:t.timestamp||new Date().toISOString(),targetPanel:n};this._triggerEvent(this.EVENT_TYPES.MESSAGE_SENT,l),console.log("[RealtimeService] Message sent:",l),o(l),this._simulateServerReceipt(l)},Math.random()*300+100)}):Promise.reject(new Error("Not connected to server"))}startProcessing(t,n){return this.connected?new Promise(o=>{setTimeout(()=>{const s={messageId:t,startTime:new Date().toISOString(),steps:n||[],currentStep:0};this._triggerEvent(this.EVENT_TYPES.PROCESSING_STARTED,s),console.log(`[RealtimeService] Processing started for message: ${t}`),o(s),n&&n.length>0&&this._simulateProcessingSteps(t,n)},200)}):Promise.reject(new Error("Not connected to server"))}subscribe(t,n){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n),()=>{this.listeners[t]=this.listeners[t].filter(o=>o!==n)}}_triggerEvent(t,n){this.listeners[t]&&this.listeners[t].forEach(o=>{try{o(n)}catch(s){console.error(`[RealtimeService] Error in event listener for ${t}:`,s)}})}_setupHeartbeat(){this.heartbeatInterval=setInterval(()=>{if(!this.connected){clearInterval(this.heartbeatInterval),this.heartbeatInterval=null;return}Math.random()<.05&&this._handleConnectionLoss()},1e4)}_handleConnectionLoss(){this.connected=!1,this._triggerEvent(this.EVENT_TYPES.CONNECTION_STATE_CHANGED,{connected:!1,connectionId:this.connectionId}),console.log("[RealtimeService] Connection lost. Attempting to reconnect..."),this._attemptReconnect()}_attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("[RealtimeService] Max reconnect attempts reached. Giving up."),this._triggerEvent(this.EVENT_TYPES.ERROR,{code:"MAX_RECONNECT_ATTEMPTS",message:"Failed to reconnect after maximum attempts"});return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(1.5,this.reconnectAttempts-1);console.log(`[RealtimeService] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect().catch(()=>{this._attemptReconnect()})},t)}_simulateServerReceipt(t){setTimeout(()=>{const n={originalMessageId:t.id,receiptId:`receipt_${Date.now()}`,timestamp:new Date().toISOString(),status:"delivered"};this._triggerEvent(this.EVENT_TYPES.MESSAGE_RECEIVED,n),console.log(`[RealtimeService] Server acknowledged message: ${t.id}`)},Math.random()*500+200)}_simulateProcessingSteps(t,n){let o=0;const s=()=>{if(o>=n.length){this._triggerEvent(this.EVENT_TYPES.PROCESSING_COMPLETED,{messageId:t,completionTime:new Date().toISOString(),steps:n}),console.log(`[RealtimeService] Processing completed for message: ${t}`);return}const l={messageId:t,currentStep:o,stepName:n[o].name,stepStatus:"completed",timestamp:new Date().toISOString()};this._triggerEvent(this.EVENT_TYPES.PROCESSING_STEP_UPDATED,l),console.log(`[RealtimeService] Step ${o} (${n[o].name}) completed for message: ${t}`),o++,setTimeout(s,Math.random()*1e3+500)};setTimeout(s,Math.random()*500+200)}}const oe=new vt,Se={MESSAGE_RECEIVED:"message_received",MESSAGE_SENT:"message_sent",CONNECTION_STATE_CHANGED:"connection_state_changed",PROCESSING_STARTED:"processing_started",PROCESSING_COMPLETED:"processing_completed",PROCESSING_STEP_UPDATED:"processing_step_updated",ERROR:"error"},Ee={retail:{id:"retail",name:"é›¶å”®åœºæ™¯",icon:Je,description:"é¡¾å®¢ä¸Žä¼ä¸šé—¨åº—çš„æ²Ÿé€š",problemRole:"é¡¾å®¢/æ¶ˆè´¹è€…",solutionRole:"ä¼ä¸šé—¨åº—/é”€å”®ä»£è¡¨",example:"æˆ‘ä¸‹å‘¨è¦åŽ»å‚åŠ AOMå›½é™…ä¼šè®®åšä¸»æ—¨æ¼”è®²ï¼Œéœ€è¦ä¸€å¥—æ­£å¼ä½†çŽ°ä»£çš„å•†åŠ¡è¥¿è£…ï¼Œé¢„ç®—åœ¨800-1500å…ƒä¹‹é—´ï¼Œèº«é«˜175cmï¼Œå¸Œæœ›èƒ½æ˜¾å¾—ä¸“ä¸šåˆæœ‰æ´»åŠ›ã€‚"},enterprise:{id:"enterprise",name:"ä¼ä¸šåœºæ™¯",icon:he,description:"ä¼ä¸šè·¨éƒ¨é—¨æ²Ÿé€š",problemRole:"å¸‚åœºéƒ¨ç»ç†",solutionRole:"ç ”å‘éƒ¨æŠ€æœ¯äººå‘˜",example:"æˆ‘ä»¬çš„ç§»åŠ¨APPç”¨æˆ·ç•™å­˜çŽ‡åªæœ‰30%ï¼Œéœ€è¦åœ¨3ä¸ªæœˆå†…å¼€å‘ä¸ªæ€§åŒ–æŽ¨èåŠŸèƒ½æ¥æå‡è‡³45%ï¼Œç›®æ ‡ç”¨æˆ·æ˜¯18-35å²ï¼Œé¢„ç®—50ä¸‡å…ƒã€‚"},education:{id:"education",name:"æ•™è‚²åœºæ™¯",icon:We,description:"å­¦ç”Ÿä¸Žæ•™å¸ˆçš„äº’åŠ¨",problemRole:"å­¦ç”Ÿ",solutionRole:"æ•™å¸ˆ",example:"æˆ‘åœ¨å­¦ä¹ é‡å­ç‰©ç†æ—¶ï¼Œå¯¹æ³¢ç²’äºŒè±¡æ€§æ¦‚å¿µç†è§£å›°éš¾ï¼Œç‰¹åˆ«æ˜¯ä¸ºä»€ä¹ˆå…‰æ—¢æ˜¯æ³¢åˆæ˜¯ç²’å­ï¼Œå¸Œæœ›é€šè¿‡å…·ä½“å®žéªŒä¾‹å­æ¥ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚"}};function St(){const[r,t]=h.useState("retail"),[n,o]=h.useState(!1),[s,l]=h.useState(!1),[c,m]=h.useState({darkMode:!0,fontSize:"medium",soundEnabled:!0,autoScroll:!0,showTimestamps:!0,language:"zh-CN",apiEndpoint:"https://api.example.com/v1",maxMessagesPerPanel:50}),p=h.useRef(null),x=h.useRef(null),{messages:i,llmProcessing:d,iterationProcessing:w,iterationMode:N,pendingResponse:j,missingInfoOptions:S,showMissingInfoPanel:_,currentNeedsAnalysis:k,toggleMissingInfoOption:$,generateFollowUpBySelectedInfo:D,skipInfoCollection:B,acceptSuggestion:A,negotiateSuggestion:K,cancelNegotiation:Y,sendNegotiationRequest:ee,rejectSuggestion:te,acceptFollowUp:P,negotiateFollowUp:F,cancelFollowUpNegotiation:Z,sendFollowUpNegotiationRequest:O,rejectFollowUp:V,sendProblemMessage:J,sendSolutionMessage:se,generateSuggestion:re,generateFollowUp:H,confirmSendResponse:g,cancelIteration:T,clearMessages:U}=Nt(r);h.useEffect(()=>{(async()=>{try{await oe.connect(),l(!0)}catch(ae){console.error("Failed to connect to realtime service:",ae)}})();const v=oe.subscribe(Se.CONNECTION_STATE_CHANGED,ae=>{l(ae.connected)}),de=oe.subscribe(Se.ERROR,ae=>{console.error("Realtime service error:",ae)});return()=>{v(),de(),oe.disconnect()}},[]),h.useEffect(()=>{c.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const a={small:"text-sm",medium:"text-base",large:"text-lg"};Object.values(a).forEach(v=>{document.documentElement.classList.remove(v)}),document.documentElement.classList.add(a[c.fontSize])},[c]);const f=a=>{m(a),localStorage.setItem("app-settings",JSON.stringify(a))};h.useEffect(()=>{const a=localStorage.getItem("app-settings");if(a)try{const v=JSON.parse(a);m(de=>({...de,...v}))}catch(v){console.error("Failed to parse saved settings:",v)}},[]);const b=()=>{U()},u=()=>{o(a=>!a)},y=a=>{a==="problem"&&p.current?p.current.focus():a==="solution"&&x.current&&x.current.focus()},C=h.useCallback(a=>{t(a),U()},[U]),M=Ee[r];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen relative overflow-hidden transition-colors duration-300",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-80 h-80 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-96 h-96 bg-gradient-to-r from-orange-500/15 to-pink-600/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-r from-cyan-400/12 to-violet-500/12 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-48 h-48 bg-gradient-to-r from-blue-400/10 to-indigo-500/10 rounded-full blur-2xl animate-pulse",style:{animationDelay:"3s"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-56 h-56 bg-gradient-to-r from-purple-400/8 to-pink-500/8 rounded-full blur-2xl animate-pulse",style:{animationDelay:"4s"}})]}),e.jsx("header",{className:"app-toolbar",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-white drop-shadow",style:{textShadow:c.darkMode?"0 1px 2px rgba(0, 0, 0, 0.5)":"0 1px 2px rgba(0, 0, 0, 0.25)"},children:"GenAI ZeroTouch Services"}),e.jsx("span",{className:"text-sm text-gray-200",style:{textShadow:c.darkMode?"0 1px 2px rgba(0, 0, 0, 0.3)":"0 1px 2px rgba(0, 0, 0, 0.15)"},children:"é›¶æ‘©æ“¦æ²Ÿé€šç³»ç»Ÿ"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(it,{scenarios:Ee,currentScenario:r,onScenarioChange:C}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:u,className:"p-2 rounded-lg transition-colors border border-white/20 hover:bg-white/20 text-white",title:"è®¾ç½® (Ctrl+,)",children:e.jsx(_e,{className:"w-5 h-5"})})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(R,{type:"slide-down",show:!0,children:e.jsx("div",{className:"mb-6 p-6 glass-panel shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative p-3 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-90"}),e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-filter blur-sm"}),e.jsx(M.icon,{className:"w-6 h-6 text-white relative z-10"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:M.name}),e.jsx("p",{className:"text-sm mt-1",children:M.description})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx(R,{type:"slide-left",show:!0,children:e.jsx("div",{className:"panel",children:e.jsx(nt,{scenario:M,messages:i.problem,onSendMessage:J,isProcessing:d,inputRef:p,settings:c})})}),e.jsx(R,{type:"scale",show:!0,children:e.jsx("div",{className:"panel",children:e.jsx(ot,{processing:d,messages:i.llm,settings:c})})}),e.jsx(R,{type:"slide-right",show:!0,children:e.jsx("div",{className:"panel",children:e.jsx(lt,{scenario:M,messages:i.solution,onSendMessage:se,isProcessing:d,iterationMode:N,pendingResponse:j,onGenerateSuggestion:re,onGenerateFollowUp:H,onConfirmSend:g,onCancelIteration:T,inputRef:x,settings:c,iterationProcessing:w,missingInfoOptions:S,showMissingInfoPanel:_,onToggleMissingInfoOption:$,onGenerateFollowUpBySelectedInfo:D,onSkipInfoCollection:B,onAcceptSuggestion:A,onNegotiateSuggestion:K,onCancelNegotiation:Y,onSendNegotiationRequest:ee,onRejectSuggestion:te,onAcceptFollowUp:P,onNegotiateFollowUp:F,onCancelFollowUpNegotiation:Z,onSendFollowUpNegotiationRequest:O,onRejectFollowUp:V})})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:U,className:"btn-glass px-6 py-3",children:"æ¸…ç©ºå¯¹è¯"})})]})]}),e.jsx(ct,{}),e.jsx(ut,{onClearMessages:b,onToggleSettings:u,onFocusInput:y}),e.jsx(mt,{isOpen:n,onClose:()=>o(!1),settings:c,onUpdateSettings:f})]})}xe.createRoot(document.getElementById("root")).render(e.jsx(De.StrictMode,{children:e.jsx(St,{})}));
